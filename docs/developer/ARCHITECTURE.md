# ðŸ— ì•„í‚¤í…ì²˜ ê°€ì´ë“œ (Architecture Guide)

Modern ML Pipelineì˜ ì„¤ê³„ ì² í•™ê³¼ í•µì‹¬ êµ¬ì¡°ë¥¼ ì„¤ëª…í•©ë‹ˆë‹¤.

---

## 1. í•µì‹¬ ì„¤ê³„ ì² í•™

ì´ í”„ë¡œì íŠ¸ëŠ” **í™•ìž¥ì„±**ê³¼ **ìž¬í˜„ì„±**ì„ ìµœìš°ì„ ìœ¼ë¡œ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤.

1.  **ì„¤ì •ê³¼ ì½”ë“œì˜ ë¶„ë¦¬ (Config-Driven)**
    - ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§(ëª¨ë¸ë§)ê³¼ ì¸í”„ë¼ ì„¤ì •(í™˜ê²½)ì„ ì™„ë²½ížˆ ë¶„ë¦¬í•©ë‹ˆë‹¤.
    - ì½”ë“œë¥¼ ìˆ˜ì •í•˜ì§€ ì•Šê³  YAML íŒŒì¼ë§Œìœ¼ë¡œ ì‹¤í—˜ì„ ì œì–´í•©ë‹ˆë‹¤.

2.  **í”ŒëŸ¬ê·¸ì¸ ì•„í‚¤í…ì²˜ (Registry Pattern)**
    - ëª¨ë“  ì»´í¬ë„ŒíŠ¸(ëª¨ë¸, ì „ì²˜ë¦¬ê¸°, í‰ê°€ê¸°)ëŠ” `Registry`ì— ë“±ë¡ë˜ì–´ ê´€ë¦¬ë©ë‹ˆë‹¤.
    - ìƒˆë¡œìš´ ê¸°ëŠ¥ì„ ì¶”ê°€í•  ë•Œ ê¸°ì¡´ ì½”ë“œë¥¼ ê±´ë“œë¦¬ì§€ ì•Šê³ , ìƒˆ ëª¨ë“ˆë§Œ ì¶”ê°€í•˜ë©´ ë©ë‹ˆë‹¤. (OCP ì›ì¹™ ì¤€ìˆ˜)

3.  **íŒ©í† ë¦¬ íŒ¨í„´ (Factory Pattern)**
    - ë³µìž¡í•œ ê°ì²´ ìƒì„± ë¡œì§ì„ `Factory` í´ëž˜ìŠ¤ì— ìœ„ìž„í•˜ì—¬, í´ë¼ì´ì–¸íŠ¸(CLI, Pipeline) ì½”ë“œë¥¼ ë‹¨ìˆœí•˜ê²Œ ìœ ì§€í•©ë‹ˆë‹¤.

---

## 2. ë””ë ‰í† ë¦¬ êµ¬ì¡° (Source Layout)

```
src/
â”œâ”€â”€ cli/                    # 1. ì§„ìž…ì  (Command Line Interface)
â”œâ”€â”€ settings/               # 2. ì„¤ì • ê´€ë¦¬ (Config & Recipe íŒŒì‹±)
â”œâ”€â”€ pipelines/              # 3. íŒŒì´í”„ë¼ì¸ (ì „ì²´ ì‹¤í–‰ íë¦„ ì œì–´)
â”œâ”€â”€ factory/                # 4. ê°ì²´ ìƒì„± (Component ì¡°ë¦½)
â”œâ”€â”€ components/             # 5. í•µì‹¬ ëª¨ë“ˆ (Adapter, Trainer, Evaluator ë“±)
â”œâ”€â”€ models/                 # 6. ëª¨ë¸ ëž˜í¼ (Sklearn, XGBoost ë“±)
â””â”€â”€ serving/                # 7. API ì„œë²„ (FastAPI)
```

---

## 3. ì»´í¬ë„ŒíŠ¸ ê³„ì¸µ êµ¬ì¡° (3-Tier)

ì‹œìŠ¤í…œì˜ ë³µìž¡ë„ë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•´ ì»´í¬ë„ŒíŠ¸ë¥¼ 3ê°€ì§€ ê³„ì¸µìœ¼ë¡œ ë‚˜ëˆ„ì–´ ê´€ë¦¬í•©ë‹ˆë‹¤.

### Tier 1: Atomic (ì›ìžì  ì»´í¬ë„ŒíŠ¸)
- **íŠ¹ì§•**: ê°€ìž¥ ê¸°ë³¸ì´ ë˜ëŠ” ë‹¨ìœ„. ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ì— ì˜ì¡´í•˜ì§€ ì•ŠìŒ.
- **ì˜ˆì‹œ**: `Adapter`(ì½ê¸°/ì“°ê¸°), `Evaluator`(ì±„ì ), `Fetcher`(ì¶”ê°€ ë°ì´í„° ì¡°íšŒ)

### Tier 2: Composite (ì¡°ë¦½í˜• ì»´í¬ë„ŒíŠ¸)
- **íŠ¹ì§•**: Tier 1 ì»´í¬ë„ŒíŠ¸ë‚˜ ì„¤ì •ì„ ì¡°í•©í•˜ì—¬ ë™ìž‘í•¨.
- **ì˜ˆì‹œ**: `Trainer`(ëª¨ë¸ + ë°ì´í„°), `DataHandler`(ë°ì´í„° ë¶„í•  ë¡œì§)

### Tier 3: Orchestrator (ê´€ë¦¬í˜• ì»´í¬ë„ŒíŠ¸)
- **íŠ¹ì§•**: ì—¬ëŸ¬ í•˜ìœ„ ë‹¨ê³„ë¥¼ ìˆœì°¨ì ìœ¼ë¡œ ì‹¤í–‰í•˜ë©° ê´€ë¦¬í•¨.
- **ì˜ˆì‹œ**: `Preprocessor` (ì—¬ëŸ¬ ì „ì²˜ë¦¬ ìŠ¤í…ì„ ìˆœì„œëŒ€ë¡œ ì‹¤í–‰)

---

## 4. ë°ì´í„° íë¦„ë„

```mermaid
graph LR
    User[ì‚¬ìš©ìž] -- YAML ì„¤ì • --> CLI
    CLI -- Config+Recipe --> Factory
    Factory -- ì¸ìŠ¤í„´ìŠ¤ ìƒì„± --> Pipeline
    
    subgraph Core Pipeline
    Pipeline --> Adapter[ë°ì´í„° ë¡œë“œ]
    Pipeline --> Preprocessor[ì „ì²˜ë¦¬]
    Pipeline --> Model[ëª¨ë¸ í•™ìŠµ/ì¶”ë¡ ]
    end
    
    Pipeline -- ê²°ê³¼ ì €ìž¥ --> MLflow
```
