# SVM Classifier: ê³ ì°¨ì› ë°ì´í„°ì˜ ë¶„ë¥˜ ë§ˆìŠ¤í„°
# ğŸ¯ ì»¤ë„ íŠ¸ë¦­ìœ¼ë¡œ ë³µì¡í•œ ê²½ê³„ë©´ì„ ì™„ë²½í•˜ê²Œ í•™ìŠµ

name: "svm_classifier"

model:
  # Scikit-learn SVM Classifier ì§ì ‘ ë™ì  import
  class_path: "sklearn.svm.SVC"
  
  # Phase 1: Point-in-Time ì •í•©ì„± ìŠ¤í‚¤ë§ˆ
  loader:
    name: "document_classification_loader"
    source_uri: "recipes/sql/loaders/document_features.sql"
    entity_schema:
      entity_columns: ["document_id", "author_id"]     # ë¬¸ì„œ-ì‘ì„±ì í˜ì–´
      timestamp_column: "created_datetime"             # ë¬¸ì„œ ì‘ì„± ì‹œì 
  
  # ê¸°ì¡´: ML ì‘ì—…ë³„ ì„¸ë¶€ ì„¤ì • (Classification ì „ìš©)
  data_interface:
    task_type: "classification"
    target_column: "document_category"    # ë¬¸ì„œ ì¹´í…Œê³ ë¦¬ (ë‹¤ì¤‘ë¶„ë¥˜)
    class_weight: "balanced"              # í´ë˜ìŠ¤ ë¶ˆê· í˜• ì²˜ë¦¬
    average: "weighted"                   # ë‹¤ì¤‘ë¶„ë¥˜ ê°€ì¤‘ í‰ê· 
    
  # Dictionary í˜•íƒœ í•˜ì´í¼íŒŒë¼ë¯¸í„° (SVM íŠ¹í™”)
  hyperparameters:
    # ì»¤ë„ ì„¤ì • (SVMì˜ í•µì‹¬)
    kernel: {type: "categorical", choices: ["rbf", "linear", "poly"]}
    
    # ì •ê·œí™” íŒŒë¼ë¯¸í„°
    C: {type: "float", low: 0.1, high: 100.0, log: true}      # ì˜¤ë¶„ë¥˜ í—ˆìš©ë„
    
    # RBF ì»¤ë„ íŒŒë¼ë¯¸í„°
    gamma: {type: "categorical", choices: ["scale", "auto"]}   # ì»¤ë„ ê³„ìˆ˜
    
    # ë‹¤í•­ì‹ ì»¤ë„ íŒŒë¼ë¯¸í„° (ì¡°ê±´ë¶€)
    degree: {type: "int", low: 2, high: 5}                    # ë‹¤í•­ì‹ ì°¨ìˆ˜
    
    # í™•ë¥  ì¶œë ¥ í™œì„±í™”
    probability: true
    
    # ê³ ì •ê°’
    random_state: 42
    class_weight: "balanced"

  # í•˜ì´í¼íŒŒë¼ë¯¸í„° íŠœë‹ ì„¤ì •
  hyperparameter_tuning:
    enabled: true
    n_trials: 60                      # SVMì€ í•™ìŠµì´ ì˜¤ë˜ ê±¸ë¦¼
    metric: "f1_weighted"             # ë‹¤ì¤‘ë¶„ë¥˜ì—ì„œ F1 ê°€ì¤‘í‰ê· 
    direction: "maximize"
  
  # Feature Store ê¸°ë°˜ í”¼ì²˜ ì¦ê°•
  augmenter:
    type: "feature_store"
    features:
      # í…ìŠ¤íŠ¸ í†µê³„ì  íŠ¹ì„±
      - feature_namespace: "text_statistics"
        features: ["word_count", "sentence_count", "avg_sentence_length", "lexical_diversity"]
      
      # ë¬¸ì²´ ë¶„ì„
      - feature_namespace: "writing_style"
        features: ["formal_words_ratio", "passive_voice_ratio", "technical_terms_count"]
      
      # í† í”½ ëª¨ë¸ë§ í”¼ì²˜
      - feature_namespace: "topic_features"
        features: ["topic_0_prob", "topic_1_prob", "topic_2_prob", "topic_coherence"]
      
      # ë©”íƒ€ë°ì´í„°
      - feature_namespace: "document_meta"
        features: ["document_type", "language", "source_platform", "edit_count"]

  # ì „ì²˜ë¦¬ ì„¤ì • (SVMì€ ìŠ¤ì¼€ì¼ë§ í•„ìˆ˜!)
  preprocessor:
    name: "classification_preprocessor"
    params:
      criterion_col: null
      exclude_cols: ["document_id", "author_id", "created_datetime", "document_category"]
      handle_missing: "median"
      scale_features: true             # SVMì€ ë°˜ë“œì‹œ ìŠ¤ì¼€ì¼ë§ í•„ìš”
      encode_categorical: "onehot"     # One-hot encoding for SVM

  # í‰ê°€ì ì„¤ì •
  evaluator:
    name: "classification_evaluator"

# í‰ê°€ ì„¤ì •
evaluation:
  metrics:
    - "accuracy"
    - "precision_weighted"
    - "recall_weighted"
    - "f1_weighted"
    - "roc_auc"                        # ë‹¤ì¤‘ë¶„ë¥˜ì—ì„œëŠ” macro-average
  
  validation:
    method: "train_test_split"
    test_size: 0.2
    stratify: true
    random_state: 42
