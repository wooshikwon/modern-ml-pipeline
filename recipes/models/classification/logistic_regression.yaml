# Logistic Regression: í•´ì„ ê°€ëŠ¥í•œ ì„ í˜• ë¶„ë¥˜ê¸°
# ğŸ“Š í™•ë¥ ì  í•´ì„ê³¼ ë¹ ë¥¸ í•™ìŠµì˜ ì™„ë²½í•œ ì¡°í™”

name: "logistic_regression"

model:
  # Scikit-learn Logistic Regression ì§ì ‘ ë™ì  import
  class_path: "sklearn.linear_model.LogisticRegression"
  
  # Phase 1: Point-in-Time ì •í•©ì„± ìŠ¤í‚¤ë§ˆ
  loader:
    name: "titanic_survival_loader"
    source_uri: "data/titanic.csv"
    adapter: storage
    entity_schema:
      entity_columns: ["PassengerId"]
      timestamp_column: "timestamp"
  
  # ê¸°ì¡´: ML ì‘ì—…ë³„ ì„¸ë¶€ ì„¤ì • (Classification ì „ìš©)
  data_interface:
    task_type: "classification"
    target_column: "will_churn"          # ì´íƒˆ ì˜ˆì¸¡ (0: ìœ ì§€, 1: ì´íƒˆ)
    class_weight: "balanced"             # ë¶ˆê· í˜• ë°ì´í„° ìë™ ì²˜ë¦¬
    average: "weighted"                  # ê°€ì¤‘ í‰ê· ìœ¼ë¡œ ì„±ëŠ¥ í‰ê°€
    
  # Dictionary í˜•íƒœ í•˜ì´í¼íŒŒë¼ë¯¸í„° (Logistic Regression íŠ¹í™”)
  hyperparameters:
    # ì •ê·œí™” ê°•ë„ (ê°€ì¥ ì¤‘ìš”í•œ í•˜ì´í¼íŒŒë¼ë¯¸í„°)
    C: {type: "float", low: 0.001, high: 100.0, log: true}
    
    # ì •ê·œí™” ë°©ë²•
    penalty: {type: "categorical", choices: ["l1", "l2", "elasticnet"]}
    
    # ìµœì í™” ì•Œê³ ë¦¬ì¦˜ (penaltyì— ë”°ë¼ í˜¸í™˜ì„± ê³ ë ¤)
    solver: {type: "categorical", choices: ["liblinear", "saga", "lbfgs"]}
    
    # ElasticNet ì •ê·œí™” ë¹„ìœ¨ (penalty="elasticnet"ì¼ ë•Œë§Œ ì‚¬ìš©)
    l1_ratio: {type: "float", low: 0.0, high: 1.0}
    
    # ê³ ì •ê°’ - ì•ˆì •ì„±ê³¼ ì¬í˜„ì„±ì„ ìœ„í•œ ì„¤ì •
    random_state: 42
    max_iter: 1000
    class_weight: "balanced"   # ë¶ˆê· í˜• ë°ì´í„° ì²˜ë¦¬

  # í•˜ì´í¼íŒŒë¼ë¯¸í„° íŠœë‹ ì„¤ì • (Classification ë©”íŠ¸ë¦­ ìµœì í™”)
  hyperparameter_tuning:
    enabled: true
    n_trials: 100                       # ë¡œì§€ìŠ¤í‹± íšŒê·€ëŠ” ë¹ ë¥´ë¯€ë¡œ ë” ë§ì€ trial
    metric: "roc_auc"                  # ROC AUCë¡œ ìµœì í™” (ì´ì§„ ë¶„ë¥˜)
    direction: "maximize"
  
  # Feature Store ê¸°ë°˜ í”¼ì²˜ ì¦ê°•
  augmenter:
    type: "feature_store"
    features:
      # ê³ ê° ê¸°ë³¸ ì •ë³´
      - feature_namespace: "customer_profile"
        features: ["age", "gender", "subscription_type", "tenure_months"]
      
      # ì‚¬ìš© íŒ¨í„´ ë¶„ì„
      - feature_namespace: "usage_patterns"
        features: ["monthly_usage_hours", "feature_adoption_score", "support_tickets_count"]
      
      # ê²°ì œ ë° êµ¬ë§¤ ì´ë ¥
      - feature_namespace: "payment_history"
        features: ["total_spent_6m", "payment_failures", "upgrade_count"]
      
      # ì¸ê²Œì´ì§€ë¨¼íŠ¸ ì§€í‘œ
      - feature_namespace: "engagement_metrics"
        features: ["login_frequency", "session_duration_avg", "last_activity_days"]

  # ì „ì²˜ë¦¬ ì„¤ì • (Logistic Regression íŠ¹í™”)
  preprocessor:
    name: "classification_preprocessor"
    params:
      criterion_col: null
      # Entity í‚¤, timestamp, targetëŠ” ì „ì²˜ë¦¬ì—ì„œ ì œì™¸
      exclude_cols: ["customer_id", "activity_date", "will_churn"]
      # ë¡œì§€ìŠ¤í‹± íšŒê·€ë¥¼ ìœ„í•œ íŠ¹ë³„ ì„¤ì •
      handle_missing: "mean"            # ìˆ˜ì¹˜í˜•ì€ í‰ê· ìœ¼ë¡œ ì±„ì›€
      scale_features: true              # í‘œì¤€í™” (ë¡œì§€ìŠ¤í‹± íšŒê·€ì— ì¤‘ìš”)
      encode_categorical: "onehot"      # ì›í•« ì¸ì½”ë”©
      remove_low_variance: true         # ë¶„ì‚°ì´ ë‚®ì€ í”¼ì²˜ ì œê±°

  # í‰ê°€ì ì„¤ì •
  evaluator:
    name: "classification_evaluator"

# í‰ê°€ ì„¤ì • (Classification íŠ¹í™” ë©”íŠ¸ë¦­)
evaluation:
  metrics:
    - "accuracy"           # ì „ì²´ ì •í™•ë„
    - "precision_weighted" # ê°€ì¤‘ ì •ë°€ë„
    - "recall_weighted"    # ê°€ì¤‘ ì¬í˜„ìœ¨
    - "f1_weighted"        # ê°€ì¤‘ F1 ìŠ¤ì½”ì–´
    - "roc_auc"           # ROC AUC (ì´ì§„ ë¶„ë¥˜ì˜ í•µì‹¬)
  
  validation:
    method: "train_test_split"
    test_size: 0.2
    stratify: true          # í´ë˜ìŠ¤ ë¹„ìœ¨ ìœ ì§€ (ë¶ˆê· í˜• ë°ì´í„° ì²˜ë¦¬)
    random_state: 42
