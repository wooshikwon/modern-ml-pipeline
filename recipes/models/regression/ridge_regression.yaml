# Ridge Regression: L2 ì •ê·œí™”ì˜ ì•ˆì •ì„±
# ğŸ›¡ï¸ ë‹¤ì¤‘ê³µì„ ì„±ì„ ì™„ë²½í•˜ê²Œ ì œì–´í•˜ëŠ” ì•ˆì •ì ì¸ íšŒê·€

name: "ridge_regression"

model:
  # Scikit-learn Ridge Regression ì§ì ‘ ë™ì  import
  class_path: "sklearn.linear_model.Ridge"
  
  # Phase 1: Point-in-Time ì •í•©ì„± ìŠ¤í‚¤ë§ˆ
  loader:
    name: "house_price_prediction_loader"
    source_uri: "recipes/sql/loaders/real_estate_features.sql"
    entity_schema:
      entity_columns: ["property_id", "location_id"]    # ë¶€ë™ì‚°-ìœ„ì¹˜ í˜ì–´
      timestamp_column: "listing_date"                  # ë§¤ë¬¼ ë“±ë¡ì¼
  
  # ê¸°ì¡´: ML ì‘ì—…ë³„ ì„¸ë¶€ ì„¤ì • (Regression ì „ìš©)
  data_interface:
    task_type: "regression"
    target_column: "price_per_sqft"      # í‰ë°©í”¼íŠ¸ë‹¹ ê°€ê²© (ì—°ì†í˜•)
    
  # Dictionary í˜•íƒœ í•˜ì´í¼íŒŒë¼ë¯¸í„° (Ridge íŠ¹í™”)
  hyperparameters:
    # L2 ì •ê·œí™” ê°•ë„ (Ridgeì˜ í•µì‹¬)
    alpha: {type: "float", low: 0.01, high: 100.0, log: true}
    
    # ì†”ë²„ ì„ íƒ
    solver: {type: "categorical", choices: ["auto", "svd", "cholesky", "lsqr", "sparse_cg"]}
    
    # ìµœëŒ€ ë°˜ë³µ íšŸìˆ˜
    max_iter: {type: "int", low: 100, high: 2000}
    
    # ê³ ì •ê°’
    random_state: 42
    fit_intercept: true

  # í•˜ì´í¼íŒŒë¼ë¯¸í„° íŠœë‹ ì„¤ì •
  hyperparameter_tuning:
    enabled: true
    n_trials: 40                      # RidgeëŠ” ë‹¨ìˆœí•˜ë¯€ë¡œ ì ë‹¹íˆ
    metric: "neg_root_mean_squared_error"
    direction: "maximize"
  
  # Feature Store ê¸°ë°˜ í”¼ì²˜ ì¦ê°•
  augmenter:
    type: "feature_store"
    features:
      # ë¶€ë™ì‚° ë¬¼ë¦¬ì  íŠ¹ì„±
      - feature_namespace: "property_characteristics"
        features: ["square_footage", "bedrooms", "bathrooms", "lot_size", "year_built"]
      
      # ìœ„ì¹˜ ê¸°ë°˜ íŠ¹ì„±
      - feature_namespace: "location_features"
        features: ["school_rating", "crime_index", "walkability_score", "public_transport_access"]
      
      # ì‹œì¥ ì¡°ê±´
      - feature_namespace: "market_conditions"
        features: ["median_neighborhood_price", "days_on_market_avg", "inventory_level", "price_trend"]
      
      # ê²½ì œì  ì§€í‘œ
      - feature_namespace: "economic_indicators"
        features: ["mortgage_rate", "employment_rate", "population_growth", "income_level"]

  # ì „ì²˜ë¦¬ ì„¤ì • (RidgeëŠ” ìŠ¤ì¼€ì¼ë§ í•„ìš”)
  preprocessor:
    name: "regression_preprocessor"
    params:
      criterion_col: null
      exclude_cols: ["property_id", "location_id", "listing_date", "price_per_sqft"]
      handle_missing: "median"
      scale_features: true             # RidgeëŠ” ìŠ¤ì¼€ì¼ë§ í•„ìš”
      encode_categorical: "onehot"

  # í‰ê°€ì ì„¤ì •
  evaluator:
    name: "regression_evaluator"

# í‰ê°€ ì„¤ì •
evaluation:
  metrics:
    - "r2_score"
    - "mean_absolute_error"
    - "mean_squared_error"
    - "root_mean_squared_error"
  
  validation:
    method: "train_test_split"
    test_size: 0.2
    random_state: 42
