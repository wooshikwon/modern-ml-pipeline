# Linear Regression: 단순하면서도 강력한 선형 회귀
# 📈 해석 가능성과 빠른 학습의 완벽한 조화

name: "linear_regression"

model:
  # Scikit-learn Linear Regression 직접 동적 import
  class_path: "sklearn.linear_model.LinearRegression"
  
  # Phase 1: Point-in-Time 정합성 스키마
  loader:
    name: "boston_housing_loader"
    source_uri: "data/boston_housing.csv"
    adapter: storage
    entity_schema:
      entity_columns: ["CRIM", "ZN", "INDUS", "CHAS", "NOX", "RM", "AGE", "DIS", "RAD", "TAX", "PTRATIO", "B", "LSTAT"]
      timestamp_column: "timestamp"
  
  # 기존: ML 작업별 세부 설정 (Regression 전용)
  data_interface:
    task_type: "regression"
    target_column: "price_per_sqm"      # 평방미터당 가격 (연속형)
    
  # Dictionary 형태 하이퍼파라미터 (Linear Regression 특화)
  hyperparameters:
    # Linear Regression은 하이퍼파라미터가 거의 없음
    # 주로 정규화된 버전들과 비교를 위한 설정
    
    # 고정값 - 기본 선형 회귀 설정
    fit_intercept: true      # 절편 항 포함
    copy_X: true            # 입력 데이터 복사 (안전성)
    n_jobs: -1              # 병렬 처리
    positive: false         # 계수 제약 없음

  # 하이퍼파라미터 튜닝 설정 (기본 선형 회귀는 튜닝할 것이 거의 없음)
  hyperparameter_tuning:
    enabled: false          # 기본 선형 회귀는 튜닝 불필요
  
  # Feature Store 기반 피처 증강
  augmenter:
    type: "feature_store"
    features:
      # 부동산 기본 정보
      - feature_namespace: "property_details"
        features: ["total_area", "room_count", "bathroom_count", "property_age", "floor_level"]
      
      # 지역 특성
      - feature_namespace: "location_features"
        features: ["distance_to_subway", "school_rating", "crime_rate", "population_density"]
      
      # 시장 동향
      - feature_namespace: "market_indicators"
        features: ["avg_price_trend_3m", "supply_demand_ratio", "transaction_volume"]
      
      # 편의시설
      - feature_namespace: "amenities"
        features: ["nearby_hospitals", "shopping_centers", "parks_count", "parking_spaces"]

  # 전처리 설정 (Linear Regression 특화)
  preprocessor:
    name: "regression_preprocessor"
    params:
      criterion_col: null
      # Entity 키, timestamp, target는 전처리에서 제외
      exclude_cols: ["property_id", "region_id", "valuation_date", "price_per_sqm"]
      # 선형 회귀를 위한 특별 설정
      handle_missing: "mean"            # 결측치를 평균으로 처리
      scale_features: true              # 표준화 (선형 회귀에 중요)
      encode_categorical: "onehot"      # 범주형 원핫 인코딩
      remove_outliers: true             # 이상치 제거 (회귀에 중요)
      outlier_method: "iqr"            # IQR 방법으로 이상치 탐지

  # 평가자 설정
  evaluator:
    name: "regression_evaluator"

# 평가 설정 (Regression 특화 메트릭)
evaluation:
  metrics:
    - "r2_score"                    # 결정계수 (설명력)
    - "mean_squared_error"          # 평균 제곱 오차
    - "mean_absolute_error"         # 평균 절대 오차
    - "root_mean_squared_error"     # 평균 제곱근 오차
  
  validation:
    method: "train_test_split"
    test_size: 0.2
    stratify: false         # 회귀에서는 stratify 불필요
    random_state: 42
