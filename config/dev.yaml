# config/dev.yaml: 'dev' í™˜ê²½ ì „ìš© ì„¤ì •
# -----------------------------------------------------------------------------
# ì´ íŒŒì¼ì€ APP_ENV=dev í™˜ê²½ì—ì„œ base.yamlì˜ ì„¤ì •ì„ ë®ì–´ì“°ëŠ” ê°’ë§Œ ì •ì˜í•©ë‹ˆë‹¤.
# ì£¼ë¡œ ê°œë°œíŒ€ì´ ê³µìœ í•˜ëŠ” í†µí•© ê°œë°œ ì„œë²„ í™˜ê²½ì„ ìœ„í•œ ì„¤ì •ì…ë‹ˆë‹¤.
# ğŸ†• ì™¸ë¶€ ë¡œì»¬ DB í™˜ê²½ (ml-pipeline-local-db) ì—°ê²° ì„¤ì • ì¶”ê°€
# -----------------------------------------------------------------------------

# ğŸ†• ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° (ì™¸ë¶€ ë¡œì»¬ PostgreSQL)
database:
  type: "postgresql"
  host: "localhost"
  port: 5432
  name: "mlpipeline"
  user: "mluser"
  password: "mlpassword"
  schema: "public"
  
  # ê°œë°œìš© ìµœì í™”
  pool_size: 5
  max_overflow: 10
  echo_sql: true  # ê°œë°œ ì¤‘ SQL ë¡œê¹…

# ğŸ†• ë°ì´í„° ì–´ëŒ‘í„° ì„¤ì • (Blueprint v17.0: Config-driven Dynamic Factory)
data_adapters:
  # DEV í™˜ê²½ ì–´ëŒ‘í„° ë§¤í•‘ (PostgreSQL ì¤‘ì‹¬)
  default_loader: "postgresql"
  default_storage: "postgresql"
  default_feature_store: "postgresql"
  
  # DEV í™˜ê²½ íŠ¹í™” ì–´ëŒ‘í„° ì„¤ì •
  adapters:
    postgresql:
      class_name: "PostgreSQLAdapter"
      config:
        host: "localhost"
        port: 5432
        database: "mlpipeline"
        user: "mluser"
        password: "mlpassword"
        schema: "public"
        pool_size: 10
        max_overflow: 20
        echo_sql: true  # ê°œë°œ í™˜ê²½ì—ì„œ SQL ë¡œê¹… í™œì„±í™”
    
    redis:
      class_name: "RedisAdapter"
      config:
        host: "localhost"
        port: 6379
        db: 0
        password: ""
        decode_responses: true
        socket_timeout: 5
        connection_pool_max_connections: 20
    
    filesystem:
      class_name: "FileSystemAdapter"
      config:
        base_path: "./data"
        supported_formats: ["parquet", "csv", "json"]
        auto_create_dirs: true

#  Feature Store ì„¤ì • (Blueprint v17.0: config í†µí•©)
feature_store:
  provider: "feast"
  
  # ğŸ¯ Blueprint ì›ì¹™ 1 ì¤€ìˆ˜: ëª¨ë“  ì„¤ì •ì„ configì— í†µí•©
  # feast ë³„ë„ íŒŒì¼ ëŒ€ì‹  ì—¬ê¸°ì„œ ì™„ì „íˆ ì •ì˜
  feast_config:
    project: "ml_pipeline_dev"
    provider: "local"
    
    # Registry (í”¼ì²˜ ë©”íƒ€ë°ì´í„° ì €ì¥ì†Œ)
    registry:
      registry_type: "sql"
      path: "postgresql://mluser:mlpassword@localhost:5432/mlpipeline"
    
    # Offline Store (ëŒ€ëŸ‰ í”¼ì²˜ ì¡°íšŒ - í•™ìŠµìš©)
    offline_store:
      type: "postgres"
      host: "localhost"
      port: 5432
      database: "mlpipeline"
      db_schema: "feature_mart"
      user: "mluser"
      password: "mlpassword"
      sslmode: "disable"
    
    # Online Store (ì‹¤ì‹œê°„ í”¼ì²˜ ì¡°íšŒ - ì„œë¹™ìš©)
    online_store:
      type: "redis"
      connection_string: "redis://localhost:6379"
      database: 0
    
    # Entity ì •ì˜
    entities:
      - name: "user"
        value_type: "STRING"
        description: "ì‚¬ìš©ì ì‹ë³„ì"
      - name: "product"
        value_type: "STRING"
        description: "ìƒí’ˆ ì‹ë³„ì"
      - name: "session"
        value_type: "STRING"
        description: "ì„¸ì…˜ ì‹ë³„ì"
    
    # ì„¤ì • í”Œë˜ê·¸
    entity_key_serialization_version: 2
    flags:
      alpha_features: true
      beta_features: true
    
    # ë°°ì¹˜ ì—”ì§„
    batch_engine:
      type: "local"
    
    # Feature Server (ê°œë°œ í™˜ê²½ì—ì„œëŠ” ë¹„í™œì„±í™”)
    feature_server:
      enabled: false

# ğŸ†• í•˜ì´í¼íŒŒë¼ë¯¸í„° íŠœë‹ (ê°œë°œ í™˜ê²½ ì œì•½)
hyperparameter_tuning:
  enabled: true
  timeout: 600  # 10ë¶„ ì œí•œ (ê°œë°œ í™˜ê²½)
  max_parallel_jobs: 2  # ë¡œì»¬ ë¦¬ì†ŒìŠ¤ ë³´í˜¸
  
  # Optuna ë°±ì—”ë“œ (ì™¸ë¶€ PostgreSQL)
  study_storage: "postgresql://mluser:mlpassword@localhost:5432/mlpipeline"
  
  pruning:
    enabled: true
    algorithm: "MedianPruner"
    n_startup_trials: 3  # ë¹ ë¥¸ pruning

environment:
  # ê°œë°œìš© GCP í”„ë¡œì íŠ¸ ID
  gcp_project_id: "your-dev-gcp-project-id"

mlflow:
  # ğŸ†• ë¡œì»¬ ê°œë°œ í™˜ê²½ì—ì„œëŠ” íŒŒì¼ ê¸°ë°˜ MLflow ì‚¬ìš©
  tracking_uri: "file://./mlruns"
  experiment_name: "Campaign-Uplift-Modeling-Dev"
  artifact_location: "./data/artifacts"

serving:
  # ğŸ†• ì™¸ë¶€ Redisë¥¼ ì‹¤ì‹œê°„ í”¼ì²˜ ìŠ¤í† ì–´ë¡œ ì‚¬ìš©
  realtime_feature_store:
    store_type: "redis"
    connection:
      host: "localhost"
      port: 6379
      db: 0

artifact_stores:
  augmented_dataset:
    # ğŸ†• ê°œë°œ í™˜ê²½ì—ì„œëŠ” ì™¸ë¶€ PostgreSQL ì‚¬ìš©
    base_uri: "postgresql://mluser:mlpassword@localhost:5432/mlpipeline"
  preprocessed_dataset:
    # ğŸ†• ê°œë°œ í™˜ê²½ì—ì„œëŠ” ë¡œì»¬ íŒŒì¼ ì‹œìŠ¤í…œ ì‚¬ìš©
    enabled: true
    base_uri: "file://./data/processed"
  prediction_results:
    # ğŸ†• ê°œë°œ í™˜ê²½ì—ì„œëŠ” ì™¸ë¶€ PostgreSQL ì‚¬ìš©
    base_uri: "postgresql://mluser:mlpassword@localhost:5432/mlpipeline"

# ğŸ†• ë¡œê¹… ì„¤ì • (ê°œë°œ í™˜ê²½ ìƒì„¸ ë¡œê¹…)
logging:
  level: "DEBUG"
  format: "detailed"
  handlers:
    - type: "console"
      level: "INFO"
    - type: "file"
      level: "DEBUG"
      filename: "./logs/app.log"
      max_size: "10MB"
      backup_count: 5

# ğŸ†• ê°œë°œ í™˜ê²½ ìµœì í™”
development:
  auto_reload: true
  debug_mode: true
  
  # ë¹ ë¥¸ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ ì„¤ì •
  sample_data_size: 10000  # ì‘ì€ ë°ì´í„°ì…‹ ì‚¬ìš©
  cache_preprocessing: true
  
  # ê°œë°œ ì¤‘ ì•ˆì „ì¥ì¹˜
  max_training_time: 1800  # 30ë¶„ ì œí•œ
