# config/dev.yaml: 'dev' 환경 전용 설정
# 'mmp-local-dev' 환경을 위한 설정으로, 운영과 유사한 환경을 시뮬레이션합니다.

# 데이터 어댑터 설정 (data_adapters.yaml 통합)
data_adapters:
  default_loader: "sql"  # dev 환경에서는 SQL 실행 필요
  default_storage: "storage"
  default_feature_store: "feature_store"
  
  # dev 환경 전용 어댑터 설정
  adapters:
    sql:
      class_name: SqlAdapter
      config:
        connection_uri: "postgresql://mluser:mysecretpassword@127.0.0.1:5432/mlpipeline"
    storage:
      class_name: StorageAdapter
      config: {}
    feature_store:
      class_name: FeastAdapter
      config: {}

# dev 환경 Feature Store 설정 (Feast - mmp-local-dev 연동)
feature_store:
  provider: "feast"
  feast_config:
    project: "ml_pipeline_dev"
    provider: "local"
    registry: "data/feature_store/dev_registry.sqlite"
    offline_store:
      type: "postgres"
      host: "localhost"
      port: 5432
      database: "mlpipeline"
      db_schema: "public"
      user: "mluser"
      password: "mysecretpassword"
    online_store:
      type: "redis"
      connection_string: "localhost:6379"

# dev 환경 하이퍼파라미터 튜닝
hyperparameter_tuning:
  enabled: true
  timeout: 600  # 10분

environment:
  gcp_project_id: "dev-project" # 예시

mlflow:
  tracking_uri: http://localhost:5002 # 포트 변경: 5001 -> 5002 (추가 포트 충돌 해결)
  experiment_name: "E2E-Test-Experiment-2025" # E2E 테스트 전용 실험명

# dev 환경 API 서빙 활성화
serving:
  enabled: true
  model_stage: "Staging"
  # dev 환경에서는 feature_store 설정을 따름

artifact_stores:
  prediction_results:
    enabled: true
    base_uri: "file://./local/artifacts/dev_predictions"
    # PostgreSQL 저장 옵션 추가 (mmp-local-dev 연동)
    postgres_storage:
      enabled: true
      table_name: "batch_predictions"
      connection_uri: "postgresql://mluser:mysecretpassword@127.0.0.1:5432/mlpipeline"
