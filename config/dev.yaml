# =============================================================================
# config/dev.yaml - ê°œë°œ í™˜ê²½ ì„¤ì • (íŒ€ í˜‘ì—… ë° í†µí•© í…ŒìŠ¤íŠ¸)
# =============================================================================
# 
# ğŸ¯ DEV í™˜ê²½ ì² í•™: "ëª¨ë“  ê¸°ëŠ¥ì´ ì™„ì „íˆ ì‘ë™í•˜ëŠ” ì•ˆì „í•œ ì‹¤í—˜ì‹¤"
# - ì™„ì „í•œ ê¸°ëŠ¥: ìš´ì˜ê³¼ ë™ì¼í•œ ì•„í‚¤í…ì²˜, ë‹¤ë¥¸ ìŠ¤ì¼€ì¼
# - íŒ€ ê³µìœ : í†µí•©ëœ Feature Storeì™€ MLflow
# - ì•ˆì „í•œ ì‹¤í—˜: ìš´ì˜ì— ì˜í–¥ ì—†ëŠ” ë…ë¦½ í™˜ê²½
# - ì‹¤ì œ í™˜ê²½: PRODì™€ ë™ì¼í•œ ê¸°ìˆ  ìŠ¤íƒ ê²€ì¦
#
# ğŸ“‹ ì£¼ìš” Use Cases:
# 1. íŒ€ í˜‘ì—… ë° ëª¨ë¸ ê³µìœ  (5-10ëª… ê°œë°œíŒ€)
# 2. í†µí•© í…ŒìŠ¤íŠ¸ ë° CI/CD ê²€ì¦
# 3. Feature Store íŒŒì´í”„ë¼ì¸ í…ŒìŠ¤íŠ¸
# 4. API ì„œë¹™ ë° ì„±ëŠ¥ í…ŒìŠ¤íŠ¸
# 5. í”„ë¡œë•ì…˜ ë°°í¬ ì „ ìµœì¢… ê²€ì¦
# =============================================================================

# ğŸ—ƒï¸ ë°ì´í„° ì–´ëŒ‘í„° ì„¤ì • - mmp-local-dev ì—°ë™
data_adapters:
  default_loader: "sql"              # PostgreSQL SQL ì‹¤í–‰
  default_storage: "storage"         # ë¡œì»¬/í´ë¼ìš°ë“œ ìŠ¤í† ë¦¬ì§€
  default_feature_store: "feature_store"  # Feast Feature Store
  
  adapters:
    # SQL ì–´ëŒ‘í„° - PostgreSQL ê°œë°œ DB
    sql:
      class_name: SqlAdapter
      config:
        connection_uri: "postgresql://mluser:mysecretpassword@127.0.0.1:5432/mlpipeline"
        
        # ğŸ¯ Use Caseë³„ DB ì„¤ì • ì˜ˆì‹œ:
        #
        # ğŸ¢ íŒ€ ê³µìœ  PostgreSQL:
        # connection_uri: "postgresql://team:${TEAM_DB_PASSWORD}@dev-db.company.com:5432/ml_dev"
        # pool_size: 10
        # max_overflow: 5
        #
        # â˜ï¸ Cloud SQL (GCP) ê°œë°œ ì¸ìŠ¤í„´ìŠ¤:
        # connection_uri: "postgresql://dev_user:${DEV_DB_PASSWORD}@${CLOUD_SQL_DEV_IP}:5432/ml_dev"
        # ssl_mode: "require"
        #
        # ğŸ”µ Azure PostgreSQL:
        # connection_uri: "postgresql://devuser@dev-server:${DEV_PASSWORD}@dev-server.postgres.database.azure.com:5432/ml_dev"
        #
        # ğŸ§ª CI/CD í…ŒìŠ¤íŠ¸ìš©:
        # connection_uri: "postgresql://ci_user:${CI_DB_PASSWORD}@ci-db:5432/test_db"
        # pool_pre_ping: true
    
    # Storage ì–´ëŒ‘í„° - ê°œë°œ í™˜ê²½ ìŠ¤í† ë¦¬ì§€
    storage:
      class_name: StorageAdapter
      config: 
        # ê¸°ë³¸ê°’: ë¡œì»¬ íŒŒì¼ì‹œìŠ¤í…œ (ë¹ ë¥¸ ê°œë°œ)
        storage_options: {}
        
        # ğŸ¯ Use Caseë³„ ìŠ¤í† ë¦¬ì§€ ì„¤ì •:
        #
        # ğŸ“ ë¡œì»¬ ê°œë°œ (ê¸°ë³¸ê°’):
        # storage_options: {}  # fsspecì´ ìë™ìœ¼ë¡œ ë¡œì»¬ ì²˜ë¦¬
        #
        # â˜ï¸ ê°œë°œ ì „ìš© GCS ë²„í‚·:
        # storage_options:
        #   project: "ml-dev-project"
        #   token: ${GCS_DEV_SERVICE_ACCOUNT}
        #
        # ğŸ—‚ï¸ íŒ€ ê³µìœ  NFS:
        # base_path: "/shared/ml-team/data"
        # storage_options:
        #   auto_mkdir: true
        #
        # ğŸ§ª CI/CD ì„ì‹œ ìŠ¤í† ë¦¬ì§€:
        # storage_options:
        #   cache_storage: "/tmp/ci_cache"
        #   auto_cleanup: true
    
    # Feature Store ì–´ëŒ‘í„°
    feature_store:
      class_name: FeastAdapter
      config: {}

# ğŸ½ï¸ Feature Store ì„¤ì • - íŒ€ ê³µìœ  ê°œë°œ í™˜ê²½
feature_store:
  provider: "feast"
  feast_config:
    project: "ml_pipeline_dev"
    provider: "local"
    registry: "data/feature_store/dev_registry.sqlite"
    
    # Offline Store - PostgreSQL (mmp-local-dev)
    offline_store:
      type: "postgres"
      host: "localhost"
      port: 5432
      database: "mlpipeline"
      db_schema: "features"  # mmp-local-devì˜ features ìŠ¤í‚¤ë§ˆ
      user: "mluser"
      password: "mysecretpassword"
      
      # ğŸ¯ Use Caseë³„ Offline Store ì„¤ì •:
      #
      # ğŸ¢ íŒ€ ê³µìœ  PostgreSQL:
      # host: "dev-db.company.com"
      # database: "team_features"
      # user: "team_feast"
      # password: ${TEAM_FEAST_PASSWORD}
      # connection_pool_size: 10
      #
      # ğŸ—„ï¸ BigQuery ê°œë°œ ë°ì´í„°ì…‹:
      # type: "bigquery"
      # project_id: "ml-dev-project"
      # dataset_id: "dev_feature_store"
      # location: "US"
      #
      # ğŸ§ª CI/CD í…ŒìŠ¤íŠ¸ í™˜ê²½:
      # type: "postgres"
      # host: "ci-postgres"
      # database: "test_features"
      # user: "ci_test"
      # password: ${CI_FEAST_PASSWORD}
    
    # Online Store - Redis (mmp-local-dev)
    online_store:
      type: "redis"
      connection_string: "localhost:6379"
      
      # ğŸ¯ Use Caseë³„ Online Store ì„¤ì •:
      #
      # âš¡ íŒ€ ê³µìœ  Redis:
      # connection_string: "redis://dev-redis.company.com:6379"
      # password: ${DEV_REDIS_PASSWORD}
      # db: 1  # ê°œë°œ ì „ìš© DB
      #
      # ğŸ”§ Redis Cluster (ê³ ê°€ìš©ì„± í…ŒìŠ¤íŠ¸):
      # type: "redis"
      # redis_type: "redis_cluster"
      # connection_string: "redis://dev-cluster-1:6379,redis://dev-cluster-2:6379"
      #
      # â˜ï¸ Cloud Redis (GCP):
      # connection_string: "redis://:${REDIS_PASSWORD}@${REDIS_DEV_IP}:6379"
      # ssl: true
      #
      # ğŸ§ª CI/CD ì„ì‹œ Redis:
      # connection_string: "redis://ci-redis:6379/5"
      # socket_timeout: 1

# ğŸ“Š MLflow ì„¤ì • - íŒ€ ê³µìœ  ì‹¤í—˜ ì¶”ì 
mlflow:
  tracking_uri: http://localhost:5002  # mmp-local-dev MLflow ì„œë²„
  experiment_name: "E2E-Test-Experiment-2025"
  
  # ğŸ¯ Use Caseë³„ MLflow ì„¤ì •:
  #
  # ğŸ¢ íŒ€ ê³µìœ  MLflow ì„œë²„:
  # tracking_uri: "https://mlflow-dev.company.com"
  # experiment_name: "Team-Dev-Experiments-${TEAM_NAME}"
  #
  # ğŸ“Š ê°œë°œìë³„ ì‹¤í—˜ ë¶„ë¦¬:
  # experiment_name: "Dev-${USER}-Experiments"
  # tags:
  #   developer: ${USER}
  #   environment: "dev"
  #
  # ğŸ§ª CI/CD ìë™ í…ŒìŠ¤íŠ¸:
  # tracking_uri: "http://ci-mlflow:5000"
  # experiment_name: "CI-Automated-Tests-${BUILD_ID}"
  #
  # ğŸ”„ ë¸Œëœì¹˜ë³„ ì‹¤í—˜:
  # experiment_name: "Feature-${GIT_BRANCH}-Experiments"

# âš¡ í•˜ì´í¼íŒŒë¼ë¯¸í„° íŠœë‹ - ê°œë°œ í™˜ê²½ ìµœì í™”
hyperparameter_tuning:
  enabled: true
  timeout: 600  # 10ë¶„ (ê°œë°œ í™˜ê²½ ìì› ë³´í˜¸)
  engine: "optuna"
  
  pruning:
    enabled: true
    algorithm: "MedianPruner"
    n_startup_trials: 5     # ë¹ ë¥¸ ê°œë°œ í”¼ë“œë°±
    n_warmup_steps: 10
  
  parallelization:
    n_jobs: 4              # ê°œë°œ ì„œë²„ ìì› ê³ ë ¤
    
  # ğŸ¯ Use Caseë³„ íŠœë‹ ì„¤ì •:
  #
  # ğŸš€ ë¹ ë¥¸ ê°œë°œ ê²€ì¦:
  #   timeout: 300           # 5ë¶„ ì œí•œ
  #   parallelization:
  #     n_jobs: 2            # ê°€ë²¼ìš´ ë¦¬ì†ŒìŠ¤ ì‚¬ìš©
  #
  # ğŸ” ìƒì„¸ ê°œë°œ í…ŒìŠ¤íŠ¸:
  #   timeout: 1800          # 30ë¶„ í—ˆìš©
  #   parallelization:
  #     n_jobs: 8            # ë” ë§ì€ ë¦¬ì†ŒìŠ¤ í™œìš©
  #
  # ğŸ§ª CI/CD ìë™ í…ŒìŠ¤íŠ¸:
  #   timeout: 180           # 3ë¶„ ê·¹í•œ ì œí•œ
  #   parallelization:
  #     n_jobs: 1            # CI í™˜ê²½ ì•ˆì •ì„± ìš°ì„ 
  #
  # ğŸ‘¥ íŒ€ ê³µìœ  í™˜ê²½:
  #   timeout: 900           # 15ë¶„
  #   parallelization:
  #     n_jobs: 6            # íŒ€ì›ë“¤ê³¼ ìì› ê³µìœ 

# ğŸŒ í™˜ê²½ ë³€ìˆ˜ - ê°œë°œ í™˜ê²½ ì„¤ì •
environment:
  app_env: "dev"
  gcp_project_id: "dev-project"
  
  # ğŸ”§ ê°œë°œ ì§€ì› ê¸°ëŠ¥
  development:
    enable_debug_mode: true     # ìƒì„¸ ë””ë²„ê¹… ì •ë³´
    enable_profiling: false     # ê¸°ë³¸ ë¹„í™œì„±í™” (í•„ìš”ì‹œ true)
    save_intermediate: true     # ì¤‘ê°„ ê²°ê³¼ ì €ì¥ (ë””ë²„ê¹…ìš©)
    
  # ğŸ§ª í…ŒìŠ¤íŠ¸ ì„¤ì •
  testing:
    enable_fast_mode: false     # ë¹ ë¥¸ í…ŒìŠ¤íŠ¸ ëª¨ë“œ
    mock_external_apis: false   # ì™¸ë¶€ API ëª¨í‚¹
    use_sample_data: false      # ìƒ˜í”Œ ë°ì´í„° ì‚¬ìš©

# ğŸ”„ API ì„œë¹™ - ê°œë°œ ë° í…ŒìŠ¤íŠ¸ìš©
serving:
  enabled: true
  model_stage: "Staging"        # MLflow Staging ìŠ¤í…Œì´ì§€ ì‚¬ìš©
  
  # ğŸ¯ Use Caseë³„ ì„œë¹™ ì„¤ì •:
  #
  # ğŸ”§ ê°œë°œ í…ŒìŠ¤íŠ¸:
  #   host: "localhost"
  #   port: 8000
  #   workers: 1
  #
  # ğŸ‘¥ íŒ€ ê³µìœ  ê°œë°œ ì„œë²„:
  #   host: "0.0.0.0"
  #   port: 8080
  #   workers: 2
  #   cors_origins: ["http://localhost:3000", "https://dev-frontend.company.com"]
  #
  # ğŸ§ª CI/CD ìë™ í…ŒìŠ¤íŠ¸:
  #   host: "0.0.0.0"
  #   port: 8888
  #   workers: 1
  #   enable_docs: false     # API ë¬¸ì„œ ë¹„í™œì„±í™”
  #
  # ğŸš€ ì„±ëŠ¥ í…ŒìŠ¤íŠ¸:
  #   workers: 4
  #   timeout: 30
  #   enable_metrics: true

# ğŸ“¦ ì•„í‹°íŒ©íŠ¸ ì €ì¥ì†Œ - ê°œë°œ í™˜ê²½ ë°ì´í„° ê´€ë¦¬
artifact_stores:
  # í”¼ì²˜ ì¦ê°• ë°ì´í„°
  augmented_dataset:
    enabled: true
    base_uri: "file://./local/artifacts/dev_augmented"
    
    # ğŸ¯ Use Caseë³„ ì €ì¥ì†Œ ì„¤ì •:
    # base_uri: "file://./shared/team_artifacts"        # íŒ€ ê³µìœ  ìŠ¤í† ë¦¬ì§€
    # base_uri: "gs://ml-dev-artifacts/augmented"       # í´ë¼ìš°ë“œ ìŠ¤í† ë¦¬ì§€
    # base_uri: "file:///nfs/ml-team/artifacts"         # NFS ê³µìœ  ìŠ¤í† ë¦¬ì§€
  
  # ì „ì²˜ë¦¬ ë°ì´í„° (ê°œë°œ/ë””ë²„ê¹…ìš©)
  preprocessed_dataset:
    enabled: true           # ê°œë°œì—ì„œëŠ” í™œì„±í™”
    base_uri: "file://./local/artifacts/dev_preprocessed"
    
  # ì˜ˆì¸¡ ê²°ê³¼
  prediction_results:
    enabled: true
    base_uri: "file://./local/artifacts/dev_predictions"
    
    # PostgreSQL ì €ì¥ (mmp-local-dev ì—°ë™)
    postgres_storage:
      enabled: true
      table_name: "batch_predictions"
      connection_uri: "postgresql://mluser:mysecretpassword@127.0.0.1:5432/mlpipeline"
      
      # ğŸ¯ Use Caseë³„ DB ì €ì¥:
      #
      # ğŸ‘¥ íŒ€ ê³µìœ  ê²°ê³¼ DB:
      # connection_uri: "postgresql://team:${TEAM_PASSWORD}@dev-db:5432/ml_results"
      # table_name: "team_predictions"
      #
      # ğŸ§ª CI/CD í…ŒìŠ¤íŠ¸ ê²°ê³¼:
      # connection_uri: "postgresql://ci:${CI_PASSWORD}@ci-db:5432/test_results"
      # table_name: "ci_test_predictions"
      # auto_cleanup: true
      #
      # ğŸ“Š ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ ê²°ê³¼:
      # table_name: "performance_test_predictions"
      # enable_indexing: true
      # partition_by: "prediction_date"

# ğŸ” ê°œë°œ í™˜ê²½ ëª¨ë‹ˆí„°ë§
monitoring:
  enable_metrics: true          # ê¸°ë³¸ ë©”íŠ¸ë¦­ ìˆ˜ì§‘
  enable_logging: true          # ìƒì„¸ ë¡œê¹…
  
  # ğŸ“Š ê°œë°œ ì§€ì› ë„êµ¬
  development_tools:
    enable_query_profiling: false    # SQL ì¿¼ë¦¬ í”„ë¡œíŒŒì¼ë§
    enable_memory_profiling: false   # ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ í”„ë¡œíŒŒì¼ë§
    save_execution_traces: false     # ì‹¤í–‰ ì¶”ì  ì €ì¥
    
  # ğŸš¨ ê°œë°œ í™˜ê²½ ì•Œë¦¼ (ì„ íƒì )
  alerts:
    enable_slack_notifications: false
    slack_channel: "#ml-dev-alerts"
    error_threshold: 0.05       # 5% ì—ëŸ¬ìœ¨ì—ì„œ ì•Œë¦¼

# ğŸ’¡ ê°œë°œíŒ€ ê°€ì´ë“œ:
#
# ğŸš€ ê°œë°œ í™˜ê²½ ì‹œì‘:
#   ./setup-dev-environment.sh start
#
# ğŸ§ª ëª¨ë¸ ì‹¤í—˜:
#   APP_ENV=dev uv run python main.py train --recipe-file my_experiment
#
# ğŸ”„ API ì„œë¹™ í…ŒìŠ¤íŠ¸:
#   APP_ENV=dev uv run python main.py serve-api --run-id <DEV_RUN_ID>
#   curl http://localhost:8000/predict -X POST -H "Content-Type: application/json" -d '{"user_id": "test123"}'
#
# ğŸ“Š MLflow UI ì ‘ê·¼:
#   http://localhost:5002
#
# ğŸ—„ï¸ Feature Store ìƒíƒœ í™•ì¸:
#   feast --feature-store-yaml ./feast/feature_store.yaml feature-views list
#
# ğŸ§ª í†µí•© í…ŒìŠ¤íŠ¸:
#   ./setup-dev-environment.sh test
