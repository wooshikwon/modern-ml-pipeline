# config/base.yaml: 모든 환경의 공통 기반이자 로컬 개발의 기본값
# -----------------------------------------------------------------------------
# 이 파일은 모든 환경(local, dev, prod)에서 공통적으로 사용되는 기본 설정을 정의합니다.
# APP_ENV 환경 변수가 설정되지 않은 경우, 이 파일의 설정이 최종적으로 사용됩니다.
# 따라서, 로컬 개발에 가장 안전하고 보수적인 값을 설정하는 것을 원칙으로 합니다.
# -----------------------------------------------------------------------------

# 1. 실행 환경
environment:
  # 기본 실행 환경은 'local'입니다.
  # Docker 빌드 시 또는 서버 환경에서 APP_ENV 환경 변수를 주입하여 변경할 수 있습니다.
  app_env: ${APP_ENV:local}
  # 로컬 개발 시에는 이 값을 사용하거나, .env 파일에서 덮어쓸 수 있습니다.
  gcp_project_id: "local-project"
  gcp_credential_path: ${GCP_CREDENTIAL_PATH:./credentials/local_gcp_credentials.json}

# 2. 모델 아티팩트 스토어 (MLflow Model Registry)
mlflow:
  # 로컬에서 실행되는 MLflow 서버를 기본값으로 합니다.
  tracking_uri: ${MLFLOW_TRACKING_URI:http://127.0.0.1:5000}
  # 모든 실험의 통합 목적을 명확히 정의
  experiment_name: "Campaign-Uplift-Modeling"

# 3. API 서버 운영 환경
serving:
  # API 서버 실행 시, 기본적으로 'Staging' 스테이지의 모델을 사용하도록 설정합니다.
  # 프로덕션에서는 config.prod.yaml에서 이 값을 "Production"으로 덮어씁니다.
  model_stage: ${MODEL_STAGE:Staging}
  # 실시간 피처 스토어 설정 (로컬 개발용)
  realtime_feature_store:
    store_type: "redis"
    connection:
      host: ${REDIS_HOST:localhost}
      port: ${REDIS_PORT:6379}
      db: 0

# 4. 데이터셋 아티팩트 스토어 (중간/최종 산출물 저장 위치)
artifact_stores:
  # 피처 증강 데이터셋 저장소
  augmented_dataset:
    enabled: true
    # 로컬 환경에서는 기본적으로 프로젝트 내 디렉토리에 파일로 저장됩니다.
    base_uri: "file://local/artifacts/augmented"
  
  # 전처리 완료 데이터셋 저장소
  preprocessed_dataset:
    enabled: false # 디버깅 시에만 true로 변경하여 사용
    base_uri: "file://local/artifacts/preprocessed"
  
  # 최종 예측 결과 저장소
  prediction_results:
    enabled: true
    base_uri: "file://local/artifacts/predictions"
