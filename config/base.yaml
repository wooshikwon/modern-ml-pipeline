# config/base.yaml: ëª¨ë“  í™˜ê²½ì˜ ê³µí†µ ê¸°ë°˜ì´ì ë¡œì»¬ ê°œë°œì˜ ê¸°ë³¸ê°’
# -----------------------------------------------------------------------------
# ì´ íŒŒì¼ì€ ëª¨ë“  í™˜ê²½(local, dev, prod)ì—ì„œ ê³µí†µì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ê¸°ë³¸ ì„¤ì •ì„ ì •ì˜í•©ë‹ˆë‹¤.
# APP_ENV í™˜ê²½ ë³€ìˆ˜ê°€ ì„¤ì •ë˜ì§€ ì•Šì€ ê²½ìš°, ì´ íŒŒì¼ì˜ ì„¤ì •ì´ ìµœì¢…ì ìœ¼ë¡œ ì‚¬ìš©ë©ë‹ˆë‹¤.
# ë”°ë¼ì„œ, ë¡œì»¬ ê°œë°œì— ê°€ì¥ ì•ˆì „í•˜ê³  ë³´ìˆ˜ì ì¸ ê°’ì„ ì„¤ì •í•˜ëŠ” ê²ƒì„ ì›ì¹™ìœ¼ë¡œ í•©ë‹ˆë‹¤.
# -----------------------------------------------------------------------------

# 1. ì‹¤í–‰ í™˜ê²½
environment:
  # ê¸°ë³¸ ì‹¤í–‰ í™˜ê²½ì€ 'local'ì…ë‹ˆë‹¤.
  # Docker ë¹Œë“œ ì‹œ ë˜ëŠ” ì„œë²„ í™˜ê²½ì—ì„œ APP_ENV í™˜ê²½ ë³€ìˆ˜ë¥¼ ì£¼ì…í•˜ì—¬ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
  app_env: ${APP_ENV:local}
  # ë¡œì»¬ ê°œë°œ ì‹œì—ëŠ” ì´ ê°’ì„ ì‚¬ìš©í•˜ê±°ë‚˜, .env íŒŒì¼ì—ì„œ ë®ì–´ì“¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
  gcp_project_id: "local-project"
  gcp_credential_path: ${GCP_CREDENTIAL_PATH:./credentials/local_gcp_credentials.json}

# 2. ëª¨ë¸ ì•„í‹°íŒ©íŠ¸ ìŠ¤í† ì–´ (MLflow Model Registry)
mlflow:
  # LOCAL í™˜ê²½ì—ì„œëŠ” íŒŒì¼ ì‹œìŠ¤í…œ ê¸°ë°˜ MLflow ì‚¬ìš©
  tracking_uri: ${MLFLOW_TRACKING_URI:http://127.0.0.1:5002} # í¬íŠ¸ ë³€ê²½: 5001 -> 5002 (ì¶”ê°€ í¬íŠ¸ ì¶©ëŒ í•´ê²°)
  # ëª¨ë“  ì‹¤í—˜ì˜ í†µí•© ëª©ì ì„ ëª…í™•íˆ ì •ì˜
  experiment_name: "Default-Experiment"

# 3. API ì„œë²„ ìš´ì˜ í™˜ê²½
serving:
  # API ì„œë²„ ì‹¤í–‰ ì‹œ, ê¸°ë³¸ì ìœ¼ë¡œ 'Staging' ìŠ¤í…Œì´ì§€ì˜ ëª¨ë¸ì„ ì‚¬ìš©í•˜ë„ë¡ ì„¤ì •í•©ë‹ˆë‹¤.
  # í”„ë¡œë•ì…˜ì—ì„œëŠ” config.prod.yamlì—ì„œ ì´ ê°’ì„ "Production"ìœ¼ë¡œ ë®ì–´ì”ë‹ˆë‹¤.
  model_stage: ${MODEL_STAGE:Staging}
  # ì‹¤ì‹œê°„ í”¼ì²˜ ìŠ¤í† ì–´ ì„¤ì • (ë¡œì»¬ ê°œë°œìš©)
  realtime_feature_store:
    store_type: "redis"
    connection:
      host: ${REDIS_HOST:localhost}
      port: ${REDIS_PORT:6379}
      db: 0

# 4. ë°ì´í„°ì…‹ ì•„í‹°íŒ©íŠ¸ ìŠ¤í† ì–´ (ì¤‘ê°„/ìµœì¢… ì‚°ì¶œë¬¼ ì €ì¥ ìœ„ì¹˜)
artifact_stores:
  # í”¼ì²˜ ì¦ê°• ë°ì´í„°ì…‹ ì €ì¥ì†Œ
  augmented_dataset:
    enabled: true
    # ë¡œì»¬ í™˜ê²½ì—ì„œëŠ” ê¸°ë³¸ì ìœ¼ë¡œ í”„ë¡œì íŠ¸ ë‚´ ë””ë ‰í† ë¦¬ì— íŒŒì¼ë¡œ ì €ì¥ë©ë‹ˆë‹¤.
    base_uri: "file://local/artifacts/augmented"
  
  # ì „ì²˜ë¦¬ ì™„ë£Œ ë°ì´í„°ì…‹ ì €ì¥ì†Œ
  preprocessed_dataset:
    enabled: false # ë””ë²„ê¹… ì‹œì—ë§Œ trueë¡œ ë³€ê²½í•˜ì—¬ ì‚¬ìš©
    base_uri: "file://local/artifacts/preprocessed"
  
  # ìµœì¢… ì˜ˆì¸¡ ê²°ê³¼ ì €ì¥ì†Œ
  prediction_results:
    enabled: true
    base_uri: "file://local/artifacts/predictions"

# ğŸ†• 5. í•˜ì´í¼íŒŒë¼ë¯¸í„° íŠœë‹ (ìƒˆë¡œ ì¶”ê°€ - ê¸°ë³¸ê°’: ë¹„í™œì„±í™”)
hyperparameter_tuning:
  enabled: false  # ê¸°ë³¸ê°’: ê¸°ì¡´ ë™ì‘ ìœ ì§€ (ê³ ì • hyperparameters)
  engine: "optuna"
  timeout: 1800  # 30ë¶„ (ì¸í”„ë¼ ì œì•½)
  pruning:
    enabled: true
    algorithm: "MedianPruner"
    n_startup_trials: 5
    n_warmup_steps: 10
  parallelization:
    n_jobs: 1  # ê¸°ë³¸ê°’: ë‹¨ì¼ ì½”ì–´

# ï¿½ï¿½ 6. Feature Store (Blueprint v17.0: config í†µí•©)
feature_store:
  provider: "dynamic"  # runtimeì—ì„œ ê²°ì •
  
  # ğŸ¯ Blueprint ì›ì¹™ 1 ì¤€ìˆ˜: ë¡œì»¬ í™˜ê²½ ê¸°ë³¸ ì„¤ì •
  # LOCAL í™˜ê²½ì˜ ê¸°ë³¸ê°’ (data/ ë””ë ‰í† ë¦¬ ê¸°ë°˜)
  feast_config:
    project: "modern_ml_pipeline"
    provider: "local"
    
    # Registry (ë¡œì»¬ íŒŒì¼ ê¸°ë°˜)
    registry: "data/feature_repo/registry.db"
    
    # Offline Store (ë¡œì»¬ íŒŒì¼ ì‹œìŠ¤í…œ)
    offline_store:
      type: "file"
      path: "data/feature_store/offline"
    
    # Online Store (ë¡œì»¬ SQLite)
    online_store:
      type: "redis"
      connection_string: ${FEATURE_STORE_REDIS_HOST:localhost}:6380 # í¬íŠ¸ ë³€ê²½
    
    # ê¸°ë³¸ ì—”í‹°í‹° ì •ì˜
    entities:
      - name: "user"
        value_type: "STRING"
        description: "ì‚¬ìš©ì ì‹ë³„ì"
      - name: "product"
        value_type: "STRING"
        description: "ìƒí’ˆ ì‹ë³„ì"
      - name: "session"
        value_type: "STRING"
        description: "ì„¸ì…˜ ì‹ë³„ì"
    
    # ì„¤ì • í”Œë˜ê·¸
    entity_key_serialization_version: 2
    flags:
      alpha_features: true
      beta_features: false  # ë¡œì»¬ì—ì„œëŠ” ì•ˆì •ì„± ìš°ì„ 
    
    # ë°°ì¹˜ ì—”ì§„
    batch_engine:
      type: "local"
    
    # Feature Server (ë¡œì»¬ì—ì„œëŠ” ë¹„í™œì„±í™”)
    feature_server:
      enabled: false
  
  # ì—°ê²° ì •ë³´ (í•˜ìœ„ í˜¸í™˜ì„±)
  connection_timeout: 5000
  retry_attempts: 3
  connection_info:
    # í™˜ê²½ë³„ë¡œ config/*.yamlì—ì„œ ì£¼ì…
    redis_host: ${FEATURE_STORE_REDIS_HOST:localhost:6379}
    offline_store_uri: ${FEATURE_STORE_OFFLINE_URI:file://data/feature_store/offline}
