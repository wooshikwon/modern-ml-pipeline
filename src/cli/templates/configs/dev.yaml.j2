# DEV 환경 설정 - 팀 협업 및 통합 테스트
environment:
  app_env: "dev"
  gcp_project_id: "{{ dev_gcp_project | default('dev-project') }}"
  
  development:
    enable_debug_mode: {{ enable_debug | default('true') }}
    enable_profiling: false
    save_intermediate: {{ save_intermediate | default('true') }}

# 데이터 어댑터 설정 - mmp-local-dev 연동
data_adapters:
  default_loader: "sql"
  default_storage: "storage"
  default_feature_store: "feature_store"
  
  adapters:
    sql:
      class_name: SqlAdapter
      config:
        connection_uri: "{{ dev_db_uri | default('postgresql://postgres:postgres@127.0.0.1:5432/mlflow') }}"
    
    storage:
      class_name: StorageAdapter
      config:
        storage_options: {}
    
    feature_store:
      class_name: FeastAdapter
      config: {}

# Feature Store 설정 - 팀 공유 개발 환경
feature_store:
  provider: "feast"
  feast_config:
    project: "{{ project_name | default('ml_pipeline_dev') }}"
    provider: "local"
    registry: "data/feature_store/dev_registry.sqlite"
    
    offline_store:
      type: "postgres"
      host: "{{ dev_db_host | default('localhost') }}"
      port: {{ dev_db_port | default('5432') }}
      database: "{{ dev_db_name | default('mlflow') }}"
      db_schema: "public"
      user: "{{ dev_db_user | default('postgres') }}"
      password: "{{ dev_db_password | default('postgres') }}"
    
    online_store:
      type: "redis"
      connection_string: "{{ dev_redis_uri | default('localhost:6379') }}"

# MLflow 설정
mlflow:
  tracking_uri: "${MLFLOW_TRACKING_URI:./mlruns}"
  experiment_name: "{{ experiment_name | default('E2E-Test-Experiment-2025') }}"

# 하이퍼파라미터 튜닝 - 개발 환경 최적화
hyperparameter_tuning:
  enabled: {{ enable_hyperparameter_tuning | default('true') }}
  timeout: {{ tuning_timeout | default('600') }}  # 10분
  engine: "optuna"
  
  pruning:
    enabled: true
    algorithm: "MedianPruner"
    n_startup_trials: 5
    n_warmup_steps: 10
  
  parallelization:
    n_jobs: {{ tuning_n_jobs | default('4') }}

# API 서빙 - 개발 및 테스트용
serving:
  enabled: {{ serving_enabled | default('true') }}
  model_stage: "Staging"
  host: "{{ serving_host | default('0.0.0.0') }}"
  port: {{ serving_port | default('8080') }}

# 아티팩트 저장소
artifact_stores:
  augmented_dataset:
    enabled: true
    base_uri: "file://./local/artifacts/dev_augmented"
  
  preprocessed_dataset:
    enabled: true
    base_uri: "file://./local/artifacts/dev_preprocessed"
  
  prediction_results:
    enabled: true
    base_uri: "file://./local/artifacts/dev_predictions"
    
    postgres_storage:
      enabled: {{ enable_postgres_storage | default('true') }}
      table_name: "batch_predictions"
      connection_uri: "{{ dev_db_uri | default('postgresql://postgres:postgres@127.0.0.1:5432/mlflow') }}"

# 모니터링
monitoring:
  enable_metrics: {{ enable_monitoring | default('true') }}
  enable_logging: {{ enable_logging | default('true') }}
  
  development_tools:
    enable_query_profiling: false
    enable_memory_profiling: false
    save_execution_traces: false