# ğŸš€ {{ project_name }} - Modern ML Pipeline

**{{ project_name }}** í”„ë¡œì íŠ¸ì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤! ì´ ê°€ì´ë“œëŠ” ML íŒŒì´í”„ë¼ì¸ì„ 5ë¶„ ë§Œì— ì‹œì‘í•  ìˆ˜ ìˆë„ë¡ ì•ˆë‚´í•©ë‹ˆë‹¤.

*{{ timestamp }}ì— Modern ML Pipelineìœ¼ë¡œ ìƒì„±ë¨*

---

## âš¡ ë¹ ë¥¸ ì‹œì‘ (5ë¶„)

```bash
# 1. í™˜ê²½ ì„¤ì • ìƒì„±
mmp get-config --env-name local

# 2. í™˜ê²½ë³€ìˆ˜ íŒŒì¼ ì¤€ë¹„ 
cp .env.local.template .env.local
# .env.local íŒŒì¼ì„ ì—´ì–´ í•„ìš”í•œ ê°’ë“¤ì„ ì…ë ¥í•˜ì„¸ìš”

# 3. ì—°ê²° í™•ì¸
mmp system-check --config-path configs/local.yaml

# 4. ëª¨ë¸ ë ˆì‹œí”¼ ìƒì„±
mmp get-recipe

# 5. ë°ì´í„° ì¤€ë¹„ (ì˜ˆì‹œ)
# CSV íŒŒì¼ì„ data/ í´ë”ì— ë°°ì¹˜í•˜ê±°ë‚˜ sql/ í´ë”ì— SQL ì¿¼ë¦¬ ì‘ì„±

# 6. ëª¨ë¸ í•™ìŠµ
mmp train --recipe-file recipes/my_model.yaml --config-path configs/local.yaml --data-path data/train.csv

# 7. ì˜ˆì¸¡ ì‹¤í–‰
mmp batch-inference --run-id <í•™ìŠµì—ì„œ_ì¶œë ¥ëœ_run_id> --config-path configs/local.yaml --data-path data/test.csv
```

**ì™„ë£Œ!** ğŸ‰ ì²« ë²ˆì§¸ ML ëª¨ë¸ì´ ì¤€ë¹„ë˜ì—ˆìŠµë‹ˆë‹¤.

---

## ğŸ“‹ ëª©ì°¨

1. [ğŸ¯ í”„ë¡œì íŠ¸ êµ¬ì¡°](#-í”„ë¡œì íŠ¸-êµ¬ì¡°)
2. [âš™ï¸ í™˜ê²½ ì„¤ì •](#ï¸-í™˜ê²½-ì„¤ì •)
3. [ğŸ“Š ë°ì´í„° ì¤€ë¹„](#-ë°ì´í„°-ì¤€ë¹„)
4. [ğŸ“ ëª¨ë¸ ë ˆì‹œí”¼ ìƒì„±](#-ëª¨ë¸-ë ˆì‹œí”¼-ìƒì„±)
5. [ğŸš€ ëª¨ë¸ í•™ìŠµ](#-ëª¨ë¸-í•™ìŠµ)
6. [ğŸ”® ì˜ˆì¸¡ ë° ì¶”ë¡ ](#-ì˜ˆì¸¡-ë°-ì¶”ë¡ )
7. [ğŸ“ˆ ê²°ê³¼ í™•ì¸](#-ê²°ê³¼-í™•ì¸)
8. [ğŸ”„ ê³ ê¸‰ ê¸°ëŠ¥](#-ê³ ê¸‰-ê¸°ëŠ¥)

---

## ğŸ¯ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
{{ project_name }}/
â”œâ”€â”€ configs/           # í™˜ê²½ë³„ ì„¤ì • íŒŒì¼ (mmp get-configë¡œ ìƒì„±)
â”œâ”€â”€ data/             # í•™ìŠµ/ì¶”ë¡  ë°ì´í„° íŒŒì¼
â”œâ”€â”€ recipes/          # ëª¨ë¸ ì„¤ì • íŒŒì¼ (mmp get-recipeë¡œ ìƒì„±)
â”œâ”€â”€ sql/              # SQL ì¿¼ë¦¬ íŒŒì¼ (ë°ì´í„°ë² ì´ìŠ¤ ì‚¬ìš©ì‹œ)
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ Dockerfile
â”œâ”€â”€ pyproject.toml
â””â”€â”€ README.md         # ì´ íŒŒì¼
```

---

## âš™ï¸ í™˜ê²½ ì„¤ì •

### 1ë‹¨ê³„: í™˜ê²½ ì„¤ì • ìƒì„±

```bash
mmp get-config --env-name local
```

ëŒ€í™”í˜•ìœ¼ë¡œ ë‹¤ìŒì„ ì„ íƒí•©ë‹ˆë‹¤:
- **MLflow ì‚¬ìš©**: ì‹¤í—˜ ì¶”ì  (ê¶Œì¥: ì˜ˆ)
- **ë°ì´í„° ì†ŒìŠ¤**: PostgreSQL, BigQuery, Local Files, S3, GCS ì¤‘ ì„ íƒ
- **Feature Store**: Feast ì‚¬ìš© ì—¬ë¶€ (ì´ˆë³´ì: ì—†ìŒ)
- **Output ì„¤ì •**: ê²°ê³¼ ì €ì¥ ìœ„ì¹˜

**ìƒì„± íŒŒì¼**:
- `configs/local.yaml`: í™˜ê²½ ì„¤ì •
- `.env.local.template`: í™˜ê²½ë³€ìˆ˜ í…œí”Œë¦¿

### 2ë‹¨ê³„: í™˜ê²½ë³€ìˆ˜ ì„¤ì •

```bash
# í…œí”Œë¦¿ ë³µì‚¬
cp .env.local.template .env.local

# íŒŒì¼ í¸ì§‘ (ì˜ˆì‹œ)
nano .env.local
```

**ì£¼ìš” í™˜ê²½ë³€ìˆ˜**:
```bash
# MLflow
MLFLOW_TRACKING_URI=./mlruns

# ë¡œì»¬ íŒŒì¼ ì‚¬ìš©ì‹œ
DATA_PATH=./data

# PostgreSQL ì‚¬ìš©ì‹œ
DB_HOST=localhost
DB_USER=your_username
DB_PASSWORD=your_password
DB_NAME=your_database
```

### 3ë‹¨ê³„: ì—°ê²° í™•ì¸

```bash
mmp system-check --config-path configs/local.yaml
```

**ì„±ê³µ ì‹œ ì¶œë ¥**:
```
âœ… Config ë¡œë“œ: configs/local.yaml
âœ… í™˜ê²½ ë³€ìˆ˜ ë¡œë“œ: .env.local
âœ… MLflow ì—°ê²° í™•ì¸
âœ… ë°ì´í„° ì†ŒìŠ¤ ì—°ê²° í™•ì¸
ğŸ‰ ì‹œìŠ¤í…œ ê²€ì‚¬ ì™„ë£Œ!
```

---

## ğŸ“Š ë°ì´í„° ì¤€ë¹„

### ë¡œì»¬ íŒŒì¼ ì‚¬ìš© (ê°€ì¥ ê°„ë‹¨)

```bash
# CSV íŒŒì¼ì„ data/ í´ë”ì— ë°°ì¹˜
data/
â”œâ”€â”€ train.csv     # í•™ìŠµìš© ë°ì´í„° (í•„ìˆ˜)
â””â”€â”€ test.csv      # ì¶”ë¡ ìš© ë°ì´í„°
```

**CSV íŒŒì¼ ìš”êµ¬ì‚¬í•­**:
- í—¤ë” í–‰ í¬í•¨
- Target ì»¬ëŸ¼ ëª…í™•íˆ êµ¬ë¶„
- ê²°ì¸¡ê°’ì€ ë¹ˆ ì¹¸ ë˜ëŠ” NaN

### SQL ì¿¼ë¦¬ ì‚¬ìš©

```bash
# SQL íŒŒì¼ì„ sql/ í´ë”ì— ì‘ì„±
sql/
â”œâ”€â”€ train_data.sql      # í•™ìŠµ ë°ì´í„° ì¿¼ë¦¬
â””â”€â”€ inference_data.sql  # ì¶”ë¡  ë°ì´í„° ì¿¼ë¦¬
```

**ì˜ˆì‹œ SQL**:
```sql
-- sql/train_data.sql
SELECT 
    user_id,
    feature1,
    feature2,
    target_column
FROM my_table 
WHERE created_date >= '2024-01-01'
```

### ë™ì  ì¿¼ë¦¬ (ê³ ê¸‰)

```sql
-- sql/train_data.sql.j2 (Jinja í…œí”Œë¦¿)
SELECT * FROM users 
WHERE created_date >= '{{ start_date }}'
  AND created_date < '{{ end_date }}'
```

```bash
# íŒŒë¼ë¯¸í„°ì™€ í•¨ê»˜ í•™ìŠµ
mmp train \
  --recipe-file recipes/my_model.yaml \
  --config-path configs/local.yaml \
  --data-path sql/train_data.sql.j2 \
  --context-params '{"start_date": "2024-01-01", "end_date": "2024-06-01"}'
```

---

## ğŸ“ ëª¨ë¸ ë ˆì‹œí”¼ ìƒì„±

### 1ë‹¨ê³„: ë ˆì‹œí”¼ ìƒì„±

```bash
mmp get-recipe
```

ëŒ€í™”í˜•ìœ¼ë¡œ ì„ íƒ:

**ğŸ“Š Task ìœ í˜•**:
- **Classification**: ìŠ¤íŒ¸ ë¶„ë¥˜, ì´ë¯¸ì§€ ì¸ì‹ ë“±
- **Regression**: ê°€ê²© ì˜ˆì¸¡, ì˜¨ë„ ì˜ˆì¸¡ ë“±  
- **Timeseries**: ì‹œê³„ì—´ ì˜ˆì¸¡
- **Clustering**: ê³ ê° ì„¸ë¶„í™”
- **Causal**: ì¸ê³¼ê´€ê³„ ë¶„ì„

**ğŸ¤– ëª¨ë¸ ì„ íƒ** (Classification ì˜ˆì‹œ):
- RandomForestClassifier (ì•ˆì •ì )
- XGBClassifier (ê³ ì„±ëŠ¥)
- LightGBMClassifier (ë¹ ë¦„)
- CatBoostClassifier (ë²”ì£¼í˜• ë°ì´í„°ì— ìš°ìˆ˜)

**ğŸ”§ ì „ì²˜ë¦¬ ë‹¨ê³„**:
1. **ê²°ì¸¡ê°’ ì²˜ë¦¬**: SimpleImputer
2. **ì¸ì½”ë”©**: OneHotEncoder, OrdinalEncoder
3. **ìŠ¤ì¼€ì¼ë§**: StandardScaler, MinMaxScaler
4. **í”¼ì²˜ ìƒì„±**: PolynomialFeatures (ì„ íƒ)

### 2ë‹¨ê³„: ìƒì„±ëœ ë ˆì‹œí”¼ í™•ì¸

```bash
# ìƒì„±ëœ ë ˆì‹œí”¼ íŒŒì¼ í™•ì¸
cat recipes/my_model.yaml
```

**í•µì‹¬ ì„¤ì • ìˆ˜ì •**:
```yaml
data:
  loader:
    source_uri: data/train.csv  # ë˜ëŠ” sql/query.sql
  data_interface:
    target_column: "target"     # ì‹¤ì œ íƒ€ê²Ÿ ì»¬ëŸ¼ëª…ìœ¼ë¡œ ë³€ê²½
    entity_columns:
      - "user_id"               # ID ì»¬ëŸ¼ë“¤

# ì „ì²˜ë¦¬ ë‹¨ê³„ì—ì„œ ì»¬ëŸ¼ëª… ìˆ˜ì •
preprocessor:
  steps:
    - type: one_hot_encoder
      columns: ["category_col1", "category_col2"]  # ì‹¤ì œ ì»¬ëŸ¼ëª…
    - type: standard_scaler  # ëª¨ë“  ìˆ«ì ì»¬ëŸ¼ì— ìë™ ì ìš©
```

---

## ğŸš€ ëª¨ë¸ í•™ìŠµ

### ê¸°ë³¸ í•™ìŠµ

```bash
mmp train \
  --recipe-file recipes/my_model.yaml \
  --config-path configs/local.yaml \
  --data-path data/train.csv
```

**í•™ìŠµ ì¤‘ ì¶œë ¥ ì˜ˆì‹œ**:
```
ğŸš€ í•™ìŠµ ì‹œì‘: my_model
ğŸ“Š ë°ì´í„° ë¡œë”©: 1,000 í–‰, 10 ì»¬ëŸ¼
ğŸ”§ ì „ì²˜ë¦¬ ì™„ë£Œ
ğŸ¯ RandomForestClassifier í•™ìŠµ ì¤‘...
âœ… í•™ìŠµ ì™„ë£Œ (15.2ì´ˆ)

ğŸ“ˆ ì„±ëŠ¥:
  - Accuracy: 0.856
  - Precision: 0.842
  - Recall: 0.871
  - F1-score: 0.856

ğŸ‰ ëª¨ë¸ ì €ì¥ë¨: run_id = abc123def456
```

### í•˜ì´í¼íŒŒë¼ë¯¸í„° íŠœë‹ (ì„ íƒ)

ë ˆì‹œí”¼ ìƒì„± ì‹œ "í•˜ì´í¼íŒŒë¼ë¯¸í„° íŠœë‹ í™œì„±í™”"ë¥¼ ì„ íƒí–ˆë‹¤ë©´:

```bash
# Optuna ìë™ íŠœë‹ìœ¼ë¡œ í•™ìŠµ
mmp train \
  --recipe-file recipes/my_tuned_model.yaml \
  --config-path configs/local.yaml \
  --data-path data/train.csv
```

---

## ğŸ”® ì˜ˆì¸¡ ë° ì¶”ë¡ 

### ë°°ì¹˜ ì˜ˆì¸¡

```bash
mmp batch-inference \
  --run-id abc123def456 \
  --config-path configs/local.yaml \
  --data-path data/test.csv
```

**ì¶œë ¥**:
```
ğŸ”® ë°°ì¹˜ ì¶”ë¡  ì‹œì‘
ğŸ“Š ë°ì´í„° ë¡œë”©: data/test.csv
ğŸ¯ ëª¨ë¸ ë¡œë”©: run_id abc123def456
âœ… ì˜ˆì¸¡ ì™„ë£Œ: 500 ê±´

ê²°ê³¼ ì €ì¥: ./artifacts/predictions/predictions_20240907_143025.csv
```

### API ì„œë¹™

```bash
# API ì„œë²„ ì‹œì‘
mmp serve-api \
  --run-id abc123def456 \
  --config-path configs/local.yaml \
  --host localhost \
  --port 8080
```

**API í…ŒìŠ¤íŠ¸**:
```bash
# ì˜ˆì¸¡ ìš”ì²­
curl -X POST http://localhost:8080/predict \
  -H "Content-Type: application/json" \
  -d '{
    "user_id": 12345,
    "feature1": 1.5,
    "feature2": "category_A"
  }'

# ì‘ë‹µ
{
  "prediction": 1,
  "probability": [0.234, 0.766],
  "model_run_id": "abc123def456",
  "inference_timestamp": "2024-09-07T14:30:25"
}
```

---

## ğŸ“ˆ ê²°ê³¼ í™•ì¸

### MLflow UI

```bash
# MLflow UI ì‹¤í–‰ (ë³„ë„ í„°ë¯¸ë„)
mlflow ui --host 0.0.0.0 --port 5000

# ë¸Œë¼ìš°ì €ì—ì„œ í™•ì¸
open http://localhost:5000
```

**í™•ì¸ ê°€ëŠ¥í•œ ë‚´ìš©**:
- ëª¨ë“  í•™ìŠµ ì‹¤í—˜ ê¸°ë¡
- ì„±ëŠ¥ ì§€í‘œ ë¹„êµ
- í•˜ì´í¼íŒŒë¼ë¯¸í„° ë¹„êµ
- ëª¨ë¸ ì•„í‹°íŒ©íŠ¸ ë‹¤ìš´ë¡œë“œ

### ì˜ˆì¸¡ ê²°ê³¼ íŒŒì¼

```bash
# ì˜ˆì¸¡ ê²°ê³¼ í™•ì¸
head -10 ./artifacts/predictions/predictions_*.csv
```

**Classification ê²°ê³¼ ì˜ˆì‹œ**:
```csv
user_id,prediction,probability_0,probability_1,model_run_id
12345,1,0.234,0.766,abc123def456
12346,0,0.671,0.329,abc123def456
```

**Regression ê²°ê³¼ ì˜ˆì‹œ**:
```csv
user_id,prediction,model_run_id
12345,45.67,abc123def456
12346,67.89,abc123def456
```

---

## ğŸ”„ ê³ ê¸‰ ê¸°ëŠ¥

### ì—¬ëŸ¬ í™˜ê²½ ì„¤ì •

```bash
# ê°œë°œ í™˜ê²½
mmp get-config --env-name dev

# í”„ë¡œë•ì…˜ í™˜ê²½  
mmp get-config --env-name prod

# í™˜ê²½ë³„ í•™ìŠµ
mmp train --recipe-file recipes/my_model.yaml --config-path configs/prod.yaml
```

### Feature Store ì—°ë™ (ê³ ê¸‰)

ë ˆì‹œí”¼ ìƒì„± ì‹œ Feature Store í™œì„±í™” í›„:

```bash
# í•™ìŠµ ì‹œì—ëŠ” PassThrough ëª¨ë“œ
mmp train --recipe-file recipes/with_feast.yaml --config-path configs/local.yaml

# ì„œë¹™ ì‹œì—ëŠ” Feature Storeì—ì„œ ì‹¤ì‹œê°„ í”¼ì²˜ ì¡°íšŒ
mmp serve-api --run-id abc123 --config-path configs/prod.yaml
```

### Docker ë°°í¬

```bash
# Docker ì´ë¯¸ì§€ ë¹Œë“œ
docker build -t {{ project_name }}:latest .

# ì»¨í…Œì´ë„ˆ ì‹¤í–‰
docker run -d \
  --name {{ project_name }}-api \
  -p 8080:8080 \
  -v $(pwd)/configs:/app/configs \
  -v $(pwd)/mlruns:/app/mlruns \
  {{ project_name }}:latest

# ë˜ëŠ” Docker Compose ì‚¬ìš©
docker-compose up -d
```

---

## ğŸ›  ë¬¸ì œ í•´ê²°

### ìì£¼ ë°œìƒí•˜ëŠ” ë¬¸ì œ

**âŒ "íƒ€ê²Ÿ ì»¬ëŸ¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŒ"**
```bash
# í•´ê²°: ë°ì´í„° ì»¬ëŸ¼ í™•ì¸
head -1 data/train.csv

# ë ˆì‹œí”¼ì—ì„œ ì˜¬ë°”ë¥¸ ì»¬ëŸ¼ëª… ì§€ì •
nano recipes/my_model.yaml
```

**âŒ "ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì‹¤íŒ¨"**
```bash
# í•´ê²°: í™˜ê²½ë³€ìˆ˜ í™•ì¸
cat .env.local

# ì—°ê²° í…ŒìŠ¤íŠ¸
mmp system-check --config-path configs/local.yaml --actionable
```

**âŒ "MLflow ì„œë²„ì— ì ‘ê·¼í•  ìˆ˜ ì—†ìŒ"**
```bash
# í•´ê²°: MLflow ì„œë²„ ì‹œì‘
mlflow ui --host 0.0.0.0 --port 5000 &
```

### ë””ë²„ê¹… ëª…ë ¹ì–´

```bash
# ì „ì²´ ì‹œìŠ¤í…œ ìƒíƒœ
mmp system-check --config-path configs/local.yaml --actionable

# ì‚¬ìš© ê°€ëŠ¥í•œ ëª¨ë¸ í™•ì¸
mmp list-commands

# ìì„¸í•œ ì˜¤ë¥˜ ì •ë³´
mmp train --recipe-file recipes/my_model.yaml --config-path configs/local.yaml --verbose
```

---

## ğŸ¯ ë‹¤ìŒ ë‹¨ê³„

### ì„±ëŠ¥ ê°œì„ 
1. **í•˜ì´í¼íŒŒë¼ë¯¸í„° íŠœë‹**: `get-recipe`ì—ì„œ Optuna í™œì„±í™”
2. **í”¼ì²˜ ì—”ì§€ë‹ˆì–´ë§**: ì „ì²˜ë¦¬ ë‹¨ê³„ ì¶”ê°€/ìˆ˜ì •
3. **ëª¨ë¸ ë¹„êµ**: ì—¬ëŸ¬ ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œ ì‹¤í—˜

### í”„ë¡œë•ì…˜ ë°°í¬
1. **í™˜ê²½ë³„ ì„¤ì •**: dev/staging/prod í™˜ê²½ êµ¬ì„±
2. **ëª¨ë‹ˆí„°ë§**: MLflow Model Registry í™œìš©
3. **ìë™í™”**: CI/CD íŒŒì´í”„ë¼ì¸ êµ¬ì¶•

### ëª¨ë²” ì‚¬ë¡€
- ë°ì´í„° í’ˆì§ˆ ê²€ì¦ ì¶”ê°€
- ëª¨ë¸ ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ ì„¤ì •
- A/B í…ŒìŠ¤íŠ¸ë¥¼ í†µí•œ ëª¨ë¸ ë¹„êµ
- ì •ê¸°ì ì¸ ëª¨ë¸ ì¬í•™ìŠµ ìŠ¤ì¼€ì¤„ ì„¤ì •

---

**ğŸŠ ì¶•í•˜í•©ë‹ˆë‹¤!** {{ project_name }} í”„ë¡œì íŠ¸ê°€ ì¤€ë¹„ë˜ì—ˆìŠµë‹ˆë‹¤.

**ê¸°ì–µí•˜ì„¸ìš”**: 
- ì²« ì‹¤í–‰ì€ `mmp get-config` â†’ `mmp get-recipe` â†’ `mmp train` ìˆœì„œ
- ë¬¸ì œ ë°œìƒì‹œ `mmp system-check --actionable` ì‹¤í–‰
- MLflow UIì—ì„œ ëª¨ë“  ì‹¤í—˜ì„ ì¶”ì í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤

ì¦ê±°ìš´ ë¨¸ì‹ ëŸ¬ë‹ ì—¬ì •ë˜ì„¸ìš”! ğŸ¤–âœ¨