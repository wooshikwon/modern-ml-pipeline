# {{ environment.upper() }} 환경 {{ recipe_type.title() }} 레시피
# Generated with Jinja2 Template Engine
name: "{{ recipe_name }}"

model:
  class_path: "sklearn.cluster.KMeans"
  hyperparameters:
    n_clusters: {{ "3" if environment == "local" else "8" }}
    random_state: 42
    n_init: {{ "5" if environment == "local" else "10" }}
    max_iter: {{ "100" if environment == "local" else "300" }}
  
  loader:
    name: "{{ loader_name }}"
    source_uri: "{{ data_source }}"
    adapter: {{ adapter }}
    entity_schema:
      entity_columns: ["user_id"]
      timestamp_column: "event_timestamp"
  data_interface:
    task_type: "clustering"
  
  {% if feature_store %}
  augmenter:
    type: "feature_store"
    features:
      - feature_namespace: "user_features"
        features: ["age", "income"]
      - feature_namespace: "behavioral_features"
        features: ["activity_score", "engagement_level"]
  {% endif %}
  
  {% if hyperparameter_tuning %}
  hyperparameter_tuning:
    enabled: true
    n_trials: {{ n_trials }}
    metric: "silhouette_score"
    direction: "maximize"
  {% else %}
  hyperparameter_tuning:
    enabled: false
  {% endif %}

evaluation:
  metrics:
    - "silhouette_score"
    - "calinski_harabasz_score"
    {% if feature_store %}- "davies_bouldin_score"{% endif %}
  validation:
    method: "k_fold"
    n_splits: 5
    random_state: 42