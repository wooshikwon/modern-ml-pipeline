# =============================================================================
# config/research.yaml - ì—°êµ¬ í™˜ê²½ ì„¤ì •
# =============================================================================
# 
# ğŸ¯ Research í™˜ê²½: "ì‹¤í—˜ì˜ ììœ ì™€ ì¬í˜„ì„±ì˜ ì™„ë²½í•œ ì¡°í™”"
# - ì—°êµ¬ì ì¹œí™”ì  ì„¤ì • ë° ìœ ì—°ì„±
# - ë‹¤ì–‘í•œ ë°ì´í„°ì…‹ ë° ëª¨ë¸ ì‹¤í—˜ ì§€ì›
# - ì™¸ë¶€ ì—°êµ¬ ë„êµ¬ ë° í”Œë«í¼ í†µí•©
# - ë…¼ë¬¸ ì¬í˜„ì„± ë° í˜‘ì—… ì¤‘ì‹¬ ì„¤ê³„
#
# ğŸ“‹ ì£¼ìš” Use Cases:
# 1. í•™ìˆ  ì—°êµ¬ ë° ë…¼ë¬¸ ì‹¤í—˜
# 2. ìƒˆë¡œìš´ ì•Œê³ ë¦¬ì¦˜ ê²€ì¦
# 3. ë²¤ì¹˜ë§ˆí¬ ë° ì„±ëŠ¥ ë¹„êµ
# 4. ì—°êµ¬ì‹¤/ëŒ€í•™ì›ìƒ í˜‘ì—…
# 5. ì˜¤í”ˆì†ŒìŠ¤ ëª¨ë¸ ì‹¤í—˜
# =============================================================================

# ğŸ“Š MLflow ì„¤ì • - ì—°êµ¬ ì‹¤í—˜ ì¶”ì 
mlflow:
  tracking_uri: ${MLFLOW_TRACKING_URI:./mlruns}  # ë¡œì»¬ ë˜ëŠ” ì—°êµ¬ì‹¤ ì„œë²„
  experiment_name: "Research-Experiments-${USER:default}"
  
  # ğŸ§ª ì—°êµ¬ ì‹¤í—˜ íƒœê·¸
  tags:
    environment: "research"
    researcher: "${USER:unknown}"
    institution: "${INSTITUTION:research-lab}"
    paper_title: "${PAPER_TITLE:}"
    conference: "${TARGET_CONFERENCE:}"

# ğŸ—ƒï¸ ë°ì´í„° ì–´ëŒ‘í„° - ì—°êµ¬ìš© ë°ì´í„° ì†ŒìŠ¤
data_adapters:
  default_loader: "storage"  # ì£¼ë¡œ íŒŒì¼ ê¸°ë°˜
  default_storage: "storage"
  default_feature_store: "passthrough"  # ë‹¨ìˆœí•¨ ì¤‘ì‹œ
  
  adapters:
    # SQL ì–´ëŒ‘í„° - ì—°êµ¬ì‹¤ DB ë˜ëŠ” ê³µê°œ ë°ì´í„°ì…‹
    sql:
      class_name: SqlAdapter
      config:
        # ì—°êµ¬ì‹¤ PostgreSQL (ê¸°ë³¸)
        connection_uri: "postgresql://${POSTGRES_USER:postgres}:${POSTGRES_PASSWORD:password}@${POSTGRES_HOST:localhost}:5432/${POSTGRES_DB:research_data}"
        
        # ê³µê°œ BigQuery ë°ì´í„°ì…‹ (ì—°êµ¬ìš©)
        # connection_uri: "bigquery://bigquery-public-data"
        
        # SQLite (ë¡œì»¬ ì‹¤í—˜ìš©)
        # connection_uri: "sqlite:///research_data.db"
    
    # Storage ì–´ëŒ‘í„° - ë‹¤ì–‘í•œ ì—°êµ¬ ë°ì´í„°
    storage:
      class_name: StorageAdapter
      config:
        # ë¡œì»¬ íŒŒì¼ ì‹œìŠ¤í…œ (ê¸°ë³¸)
        base_path: "./data"
        
        # ì—°êµ¬ì‹¤ ê³µìœ  ìŠ¤í† ë¦¬ì§€
        # base_path: "/shared/research_data"
        
        # í´ë¼ìš°ë“œ ì—°êµ¬ ë²„í‚· (ëŒ€ìš©ëŸ‰ ë°ì´í„°ì…‹)
        # storage_options:
        #   project: ${RESEARCH_GCP_PROJECT}
        #   token: ${GOOGLE_APPLICATION_CREDENTIALS}
    
    # Feature Store - ë‹¨ìˆœ ëª¨ë“œ (ì—°êµ¬ ì¤‘ì‹¬)
    feature_store:
      class_name: FeastAdapter
      config: {}

# ğŸ½ï¸ Feature Store ì„¤ì • - ì—°êµ¬ ì¹œí™”ì  ì„¤ì •
feature_store:
  provider: "passthrough"  # ê¸°ë³¸ê°’: ë³µì¡ì„± ì œê±°
  
  # ê³ ê¸‰ ì—°êµ¬ìš© Feature Store (í•„ìš”ì‹œ í™œì„±í™”)
  # provider: "feast"
  # feast_config:
  #   project: "research_features"
  #   provider: "local"
  #   registry: "data/research_registry.sqlite"
  #   
  #   offline_store:
  #     type: "file"
  #     path: "data/features"
  #   
  #   online_store:
  #     type: "sqlite"
  #     path: "data/online_features.db"

# âš¡ í•˜ì´í¼íŒŒë¼ë¯¸í„° íŠœë‹ - ì—°êµ¬ ìµœì í™”
hyperparameter_tuning:
  enabled: true
  timeout: 3600  # 1ì‹œê°„ (ì—°êµ¬ ì‹¤í—˜ ë‹¨ìœ„)
  engine: "optuna"
  
  # ì—°êµ¬ìš© ìµœì í™” ì„¤ì •
  pruning:
    enabled: true
    algorithm: "MedianPruner"
    n_startup_trials: 10
    n_warmup_steps: 20
  
  parallelization:
    n_jobs: ${N_JOBS:4}  # ì—°êµ¬ì‹¤ ìì›ì— ë§ê²Œ ì¡°ì •
    
  # ğŸ”¬ ì—°êµ¬ íŠ¹í™” ì„¤ì •
  research_mode:
    save_all_trials: true       # ëª¨ë“  ì‹¤í—˜ ê¸°ë¡ ë³´ì¡´
    detailed_logging: true      # ìƒì„¸ ë¡œê¹…
    reproducibility_mode: true  # ì¬í˜„ì„± ë³´ì¥
    
  # ğŸ“Š ì‹¤í—˜ ë¹„êµ ì„¤ì •
  comparison:
    enable_baseline: true
    baseline_models: ["random", "dummy", "simple_linear"]
    statistical_tests: true

# ğŸŒ í™˜ê²½ ë³€ìˆ˜ - ì—°êµ¬ í™˜ê²½ ì„¤ì •
environment:
  app_env: "research"
  
  # ğŸ§ª ì—°êµ¬ ì§€ì› ê¸°ëŠ¥
  research:
    enable_debug_mode: true
    enable_profiling: true
    save_intermediate_results: true
    enable_visualization: true
    
  # ğŸ“Š ì‹¤í—˜ ì¶”ì 
  experiment_tracking:
    enable_wandb: ${ENABLE_WANDB:false}
    enable_tensorboard: true
    enable_mlflow: true
    
  # ğŸ”„ ì¬í˜„ì„± ì„¤ì •
  reproducibility:
    fix_random_seeds: true
    save_environment: true
    track_dependencies: true
    git_integration: true

# ğŸš« API ì„œë¹™ - ì—°êµ¬ í™˜ê²½ì—ì„œëŠ” ë¹„í™œì„±í™”
serving:
  enabled: false  # ì—°êµ¬ëŠ” ì˜¤í”„ë¼ì¸ ë¶„ì„ ì¤‘ì‹¬
  
  # í•„ìš”ì‹œ í™œì„±í™” (ë°ëª¨, í”„ë¡œí† íƒ€ì…ìš©)
  # enabled: true
  # model_stage: "Staging"
  # host: "localhost"
  # port: 8000

# ğŸ“¦ ì•„í‹°íŒ©íŠ¸ ì €ì¥ì†Œ - ì—°êµ¬ ê²°ê³¼ ë³´ê´€
artifact_stores:
  # ì‹¤í—˜ ë°ì´í„° (ëª¨ë“  ì¤‘ê°„ ê²°ê³¼ ì €ì¥)
  experiment_data:
    enabled: true
    base_uri: "file://./experiments/${EXPERIMENT_NAME:default}"
    
  # ëª¨ë¸ ì²´í¬í¬ì¸íŠ¸
  model_checkpoints:
    enabled: true
    base_uri: "file://./checkpoints"
    versioning: true
    
  # ì‹œê°í™” ê²°ê³¼
  visualizations:
    enabled: true
    base_uri: "file://./visualizations"
    formats: ["png", "pdf", "svg"]
    
  # ë…¼ë¬¸ ìë£Œ (ì¬í˜„ì„± íŒ¨í‚¤ì§€)
  paper_artifacts:
    enabled: true
    base_uri: "file://./paper_artifacts"
    include_code: true
    include_data: true
    include_models: true

# ğŸ” ë¡œê¹… ë° ë¶„ì„ - ì—°êµ¬ ì¹œí™”ì 
logging:
  level: "DEBUG"  # ìƒì„¸ ë¡œê¹…
  format: "detailed"
  
  # ğŸ“Š ì‹¤í—˜ ë¡œê¹…
  experiment_logging:
    log_hyperparameters: true
    log_metrics: true
    log_artifacts: true
    log_model_signature: true
    
  # ğŸ“ˆ ì„±ëŠ¥ í”„ë¡œíŒŒì¼ë§
  profiling:
    enable_time_profiling: true
    enable_memory_profiling: true
    enable_gpu_profiling: ${ENABLE_GPU_PROFILING:false}

# ğŸ”¬ ì—°êµ¬ íŠ¹í™” ë„êµ¬ í†µí•©
research_tools:
  # Weights & Biases í†µí•©
  wandb:
    enabled: ${ENABLE_WANDB:false}
    project: ${WANDB_PROJECT:research-experiments}
    entity: ${WANDB_ENTITY:}
    tags: ["research", "experiment"]
    
  # TensorBoard í†µí•©
  tensorboard:
    enabled: true
    log_dir: "./tensorboard_logs"
    
  # Jupyter Notebook í†µí•©
  jupyter:
    enable_autosave: true
    enable_checkpoints: true
    notebook_dir: "./notebooks"
    
  # ì™¸ë¶€ ëª¨ë¸ í—ˆë¸Œ ì—°ë™
  model_hubs:
    huggingface:
      enabled: ${ENABLE_HUGGINGFACE:false}
      cache_dir: "./hf_cache"
    
    pytorch_hub:
      enabled: true
      cache_dir: "./torch_cache"
    
    tensorflow_hub:
      enabled: false
      cache_dir: "./tf_cache"

# ğŸ“Š ë°ì´í„°ì…‹ ê´€ë¦¬
datasets:
  # ê³µê°œ ë²¤ì¹˜ë§ˆí¬ ë°ì´í„°ì…‹
  benchmark_datasets:
    enabled: true
    auto_download: true
    cache_dir: "./datasets"
    
    # ì£¼ìš” ë²¤ì¹˜ë§ˆí¬ ë°ì´í„°ì…‹
    available:
      - "iris"
      - "wine" 
      - "breast_cancer"
      - "digits"
      - "boston_housing"
      - "california_housing"
    
  # ì‚¬ìš©ì ì •ì˜ ë°ì´í„°ì…‹
  custom_datasets:
    enabled: true
    data_dir: "./custom_data"
    
    # ë°ì´í„° ê²€ì¦
    validation:
      check_missing_values: true
      check_data_types: true
      check_target_distribution: true
    
  # ë°ì´í„° ì „ì²˜ë¦¬ íŒŒì´í”„ë¼ì¸
  preprocessing:
    enable_auto_eda: true
    enable_data_profiling: true
    save_preprocessing_steps: true

# ğŸ§ª ì‹¤í—˜ ê´€ë¦¬
experiment_management:
  # ì‹¤í—˜ ë¹„êµ
  comparison:
    enable_model_comparison: true
    enable_metric_comparison: true
    enable_statistical_testing: true
    
    # ì‹œê°í™”
    plots:
      - "learning_curves"
      - "feature_importance" 
      - "confusion_matrix"
      - "roc_curves"
      - "residual_plots"
    
  # ì¬í˜„ì„± ë³´ì¥
  reproducibility:
    track_git_commit: true
    save_conda_environment: true
    save_pip_requirements: true
    fix_random_seeds: true
    
  # í˜‘ì—… ì§€ì›
  collaboration:
    enable_experiment_sharing: true
    enable_comment_system: true
    enable_review_system: false

# ğŸ’¡ ì—°êµ¬ì ê°€ì´ë“œ:
#
# ğŸš€ ë¹ ë¥¸ ì‹¤í—˜ ì‹œì‘:
#   1. ë°ì´í„° ì¤€ë¹„: data/ ë””ë ‰í† ë¦¬ì— ì‹¤í—˜ ë°ì´í„° ë°°ì¹˜
#   2. ì‹¤í—˜ ì‹¤í–‰: modern-ml-pipeline train --recipe-file recipes/research_experiment.yaml
#   3. ê²°ê³¼ ë¶„ì„: ìë™ ìƒì„±ëœ ì‹œê°í™” ë° ë³´ê³ ì„œ í™•ì¸
#
# ğŸ”¬ ê³ ê¸‰ ì‹¤í—˜:
#   1. Weights & Biases ì—°ë™: ENABLE_WANDB=true ì„¤ì •
#   2. í•˜ì´í¼íŒŒë¼ë¯¸í„° ìµœì í™”: hyperparameter_tuning.enabled=true
#   3. ëª¨ë¸ ë¹„êµ: ë‹¤ì–‘í•œ ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œ ë™ì¼ ë°ì´í„° ì‹¤í—˜
#
# ğŸ“Š ê²°ê³¼ ë¶„ì„:
#   - MLflow UI: ì‹¤í—˜ ê²°ê³¼ ë¹„êµ ë° ì‹œê°í™”
#   - TensorBoard: í•™ìŠµ ê³¼ì • ëª¨ë‹ˆí„°ë§
#   - Jupyter Notebook: ìƒì„¸ ë¶„ì„ ë° ì‹œê°í™”
#
# ğŸ“ ë…¼ë¬¸ ì‘ì„±:
#   1. ì¬í˜„ì„± íŒ¨í‚¤ì§€ ìƒì„±: paper_artifactsì— ëª¨ë“  ìë£Œ ìë™ ì €ì¥
#   2. ì‹¤í—˜ ê²°ê³¼ ë‚´ë³´ë‚´ê¸°: í‘œ, ê·¸ë˜í”„, í†µê³„ ìš”ì•½
#   3. ì½”ë“œ ë° ë°ì´í„° ê³µìœ : Git + MLflowë¡œ ì™„ì „í•œ ì¶”ì 
#
# =============================================================================