# =============================================================================
# config/enterprise.yaml - ì—”í„°í”„ë¼ì´ì¦ˆ í™˜ê²½ ì„¤ì •
# =============================================================================
# 
# ğŸ¯ Enterprise í™˜ê²½: "í™•ì¥ì„±, ë³´ì•ˆì„±, ê´€ë¦¬ì„±ì˜ í”„ë¡œë•ì…˜ê¸‰ MLOps"
# - í´ë¼ìš°ë“œ ë„¤ì´í‹°ë¸Œ ì„œë¹„ìŠ¤ ì™„ì „ í™œìš©
# - ì—”í„°í”„ë¼ì´ì¦ˆ ë³´ì•ˆ ë° ê±°ë²„ë„ŒìŠ¤ ì¤€ìˆ˜
# - ëŒ€ê·œëª¨ íŒ€ í˜‘ì—… ë° ë©€í‹° í”„ë¡œì íŠ¸ ì§€ì›
# - ì™„ì „í•œ ê´€ì¸¡ ê°€ëŠ¥ì„± ë° ìš´ì˜ ìë™í™”
#
# ğŸ“‹ ì£¼ìš” Use Cases:
# 1. ëŒ€ê·œëª¨ ML ì„œë¹™ (100K+ requests/day)
# 2. ë©€í‹°íŒ€ MLOps í”Œë«í¼ ìš´ì˜
# 3. ì—”í„°í”„ë¼ì´ì¦ˆ ë°ì´í„° ê±°ë²„ë„ŒìŠ¤
# 4. ê·œì œ ì¤€ìˆ˜ ë° ê°ì‚¬ ì¶”ì 
# 5. ê¸€ë¡œë²Œ ë©€í‹° ë¦¬ì „ ì„œë¹„ìŠ¤
# =============================================================================

# ğŸ“Š MLflow ì„¤ì • - ì—”í„°í”„ë¼ì´ì¦ˆ MLflow ì„œë²„
mlflow:
  tracking_uri: ${MLFLOW_TRACKING_URI}
  experiment_name: "Enterprise-Production-Models"
  
  # ğŸ¢ ì—”í„°í”„ë¼ì´ì¦ˆ MLflow ì˜µì…˜
  tags:
    environment: "production"
    team: "ml-platform"
    cost_center: "technology"
    compliance: "gdpr_sox"

# ğŸ—ƒï¸ ë°ì´í„° ì–´ëŒ‘í„° - ì—”í„°í”„ë¼ì´ì¦ˆ ë°ì´í„° í”Œë«í¼
data_adapters:
  default_loader: "sql"
  default_storage: "storage"
  default_feature_store: "feature_store"
  
  adapters:
    # SQL ì–´ëŒ‘í„° - BigQuery (ê¸°ë³¸) ë˜ëŠ” ê¸°íƒ€ ì—”í„°í”„ë¼ì´ì¦ˆ DW
    sql:
      class_name: SqlAdapter
      config:
        # Google Cloud BigQuery (ê¶Œì¥)
        connection_uri: "bigquery://${GCP_PROJECT_ID}/${BIGQUERY_DATASET}"
        
        # ëŒ€ì•ˆ: Snowflake (ë©€í‹°í´ë¼ìš°ë“œ)
        # connection_uri: "snowflake://${SNOWFLAKE_USER}:${SNOWFLAKE_PASSWORD}@${SNOWFLAKE_ACCOUNT}/${SNOWFLAKE_DATABASE}/${SNOWFLAKE_SCHEMA}?warehouse=${SNOWFLAKE_WAREHOUSE}"
        
        # ëŒ€ì•ˆ: Azure Synapse
        # connection_uri: "mssql+pyodbc://${AZURE_SQL_USER}:${AZURE_SQL_PASSWORD}@${AZURE_SYNAPSE_ENDPOINT}:1433/${AZURE_SQL_DATABASE}?driver=ODBC+Driver+17+for+SQL+Server"
        
        # ëŒ€ì•ˆ: Enterprise PostgreSQL
        # connection_uri: "postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:5432/${POSTGRES_DB}"
    
    # Storage ì–´ëŒ‘í„° - í´ë¼ìš°ë“œ ì˜¤ë¸Œì íŠ¸ ìŠ¤í† ë¦¬ì§€
    storage:
      class_name: StorageAdapter
      config:
        # Google Cloud Storage (ê¸°ë³¸)
        storage_options:
          project: ${GCP_PROJECT_ID}
          token: ${GOOGLE_APPLICATION_CREDENTIALS}
        
        # ëŒ€ì•ˆ: AWS S3
        # storage_options:
        #   key: ${AWS_ACCESS_KEY_ID}
        #   secret: ${AWS_SECRET_ACCESS_KEY}
        #   client_kwargs:
        #     region_name: ${AWS_REGION}
        
        # ëŒ€ì•ˆ: Azure Blob Storage
        # storage_options:
        #   account_name: ${AZURE_STORAGE_ACCOUNT}
        #   account_key: ${AZURE_STORAGE_KEY}
    
    # Feature Store ì–´ëŒ‘í„°
    feature_store:
      class_name: FeastAdapter
      config: {}

# ğŸ½ï¸ Feature Store ì„¤ì • - ì—”í„°í”„ë¼ì´ì¦ˆ Feature Store
feature_store:
  provider: "feast"
  feast_config:
    project: "enterprise_ml_platform"
    provider: "gcp"  # gcp/aws/azure
    registry: "gs://${GCS_BUCKET}/feast/registry.db"
    
    # Offline Store - BigQuery (ëŒ€ê·œëª¨ ë°°ì¹˜ ì²˜ë¦¬)
    offline_store:
      type: "bigquery"
      project_id: ${GCP_PROJECT_ID}
      dataset_id: "enterprise_feature_store"
      location: "US"
      
      # ëŒ€ì•ˆ: Snowflake
      # type: "snowflake"
      # account: ${SNOWFLAKE_ACCOUNT}
      # user: ${SNOWFLAKE_USER}
      # password: ${SNOWFLAKE_PASSWORD}
      # database: "ENTERPRISE_FEATURES"
      # warehouse: "FEATURE_WH"
    
    # Online Store - Redis (ì‹¤ì‹œê°„ ì„œë¹™)
    online_store:
      type: "redis"
      connection_string: ${REDIS_CONNECTION_STRING}
      ssl: true
      
      # ëŒ€ì•ˆ: DynamoDB (AWS)
      # type: "dynamodb"
      # region: ${AWS_REGION}
      # table_name: "enterprise_feast_online"
      
      # ëŒ€ì•ˆ: Cosmos DB (Azure)
      # type: "cosmosdb"
      # connection_string: ${COSMOSDB_CONNECTION_STRING}
      # database_name: "enterprise_feast"

# âš¡ í•˜ì´í¼íŒŒë¼ë¯¸í„° íŠœë‹ - ì—”í„°í”„ë¼ì´ì¦ˆê¸‰ ìµœì í™”
hyperparameter_tuning:
  enabled: true
  timeout: 14400  # 4ì‹œê°„ (ì¶©ë¶„í•œ íƒìƒ‰ ì‹œê°„)
  engine: "optuna"
  
  # ê³ ì„±ëŠ¥ ë¶„ì‚° ìµœì í™”
  pruning:
    enabled: true
    algorithm: "MedianPruner"
    n_startup_trials: 20
    n_warmup_steps: 50
  
  parallelization:
    n_jobs: 32  # ì—”í„°í”„ë¼ì´ì¦ˆ ì»´í“¨íŒ… ìì› í™œìš©
    
  # ë¹„ìš© ìµœì í™” ì„¤ì •
  cost_optimization:
    max_budget: 10000  # ìµœëŒ€ ì˜ˆì‚° ($)
    early_stopping: true
    resource_monitoring: true

# ğŸŒ í™˜ê²½ ë³€ìˆ˜ - ì—”í„°í”„ë¼ì´ì¦ˆ ì„¤ì •
environment:
  app_env: "prod"
  gcp_project_id: ${GCP_PROJECT_ID}
  
  # ğŸ”’ ë³´ì•ˆ ì„¤ì •
  security:
    enable_authentication: true
    api_key_required: true
    rate_limiting: true
    encryption_at_rest: true
    encryption_in_transit: true
    
  # ğŸ“Š ëª¨ë‹ˆí„°ë§ ì„¤ì •
  monitoring:
    enable_metrics: true
    enable_tracing: true
    enable_profiling: true
    enable_alerting: true
    
  # ğŸ¢ ê±°ë²„ë„ŒìŠ¤ ì„¤ì •
  governance:
    enable_data_lineage: true
    enable_model_registry: true
    enable_audit_logging: true
    compliance_mode: "enterprise"
    
  # ğŸ“ˆ ì„±ëŠ¥ ì„¤ì •
  performance:
    enable_caching: true
    enable_connection_pooling: true
    enable_async_processing: true

# ğŸ”„ API ì„œë¹™ - ì—”í„°í”„ë¼ì´ì¦ˆê¸‰ ì„œë¹™
serving:
  enabled: true
  model_stage: "Production"
  
  # ğŸš€ ê³ ê°€ìš©ì„± ì„¤ì •
  high_availability:
    min_replicas: 3
    max_replicas: 100
    auto_scaling: true
    health_checks: true
    
  # ğŸ”’ ë³´ì•ˆ ì„¤ì •
  security:
    enable_https: true
    require_authentication: true
    enable_cors: false
    rate_limiting: 1000  # requests per minute
    
  # ğŸ“Š ê´€ì¸¡ì„±
  observability:
    enable_metrics: true
    enable_logging: true
    enable_tracing: true
    log_level: "INFO"

# ğŸ“¦ ì•„í‹°íŒ©íŠ¸ ì €ì¥ì†Œ - ì—”í„°í”„ë¼ì´ì¦ˆ ë°ì´í„° ê´€ë¦¬
artifact_stores:
  # í”¼ì²˜ ì¦ê°• ë°ì´í„°
  augmented_dataset:
    enabled: true
    base_uri: "gs://${GCS_BUCKET}/ml-artifacts/augmented"
    
    # ë°ì´í„° ê±°ë²„ë„ŒìŠ¤
    governance:
      enable_versioning: true
      enable_lineage: true
      retention_policy: "7_years"
      encryption: true
    
  # ì „ì²˜ë¦¬ ë°ì´í„° (ê°ì‚¬ìš©)
  preprocessed_dataset:
    enabled: true
    base_uri: "gs://${GCS_BUCKET}/ml-artifacts/preprocessed"
    retention_days: 2555  # 7ë…„
    
  # ì˜ˆì¸¡ ê²°ê³¼ (ê·œì œ ì¤€ìˆ˜ìš©)
  prediction_results:
    enabled: true
    base_uri: "gs://${GCS_BUCKET}/ml-predictions"
    
    # ğŸ—„ï¸ ë°ì´í„°ë² ì´ìŠ¤ ì €ì¥ (ì‹¤ì‹œê°„ ì¡°íšŒ)
    postgres_storage:
      enabled: true
      table_name: "enterprise_predictions"
      connection_uri: "postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:5432/${POSTGRES_DB}"
      
      # íŒŒí‹°ì…”ë‹ ë° ì¸ë±ì‹±
      partitioning:
        enabled: true
        partition_by: "prediction_date"
        retention: "5_years"
      
      indexing:
        enabled: true
        indexes: ["model_id", "user_id", "prediction_timestamp"]

# ğŸ” ë¡œê¹… ë° ëª¨ë‹ˆí„°ë§ - ì—”í„°í”„ë¼ì´ì¦ˆ ê´€ì¸¡ì„±
logging:
  level: "INFO"
  format: "json"
  
  # ğŸ“Š ì¤‘ì•™í™”ëœ ë¡œê·¸ ìˆ˜ì§‘
  aggregation:
    enabled: true
    service: "cloud_logging"  # cloud_logging/datadog/splunk
    project_id: ${GCP_PROJECT_ID}
    
  # ğŸš¨ ì•Œë¦¼ ì„¤ì •
  alerting:
    enabled: true
    channels:
      slack:
        webhook_url: ${SLACK_WEBHOOK_URL}
        channel: "#ml-platform-alerts"
      pagerduty:
        api_key: ${PAGERDUTY_API_KEY}
        service_id: "ml-platform-service"
      email:
        smtp_host: ${EMAIL_SMTP_HOST}
        recipients: ["ml-ops@company.com"]

# ğŸ“ˆ ì„±ëŠ¥ ë° ìŠ¤ì¼€ì¼ë§ ì„¤ì •
performance:
  # ğŸ”„ ì—°ê²° í’€ë§
  connection_pooling:
    enabled: true
    pool_size: 20
    max_overflow: 50
    pool_timeout: 30
    
  # ğŸ’¾ ìºì‹±
  caching:
    enabled: true
    cache_type: "redis"  # redis/memcached/file
    ttl: 3600  # 1ì‹œê°„
    max_size: "10GB"
    
  # âš¡ ë¹„ë™ê¸° ì²˜ë¦¬
  async_processing:
    enabled: true
    queue_size: 10000
    worker_count: 16

# ğŸ” ë³´ì•ˆ ë° ê·œì œ ì¤€ìˆ˜
security:
  # ğŸ›¡ï¸ ë°ì´í„° ì•”í˜¸í™”
  encryption:
    at_rest: true
    in_transit: true
    key_management: "cloud_kms"  # cloud_kms/vault/custom
    
  # ğŸ” ì ‘ê·¼ ì œì–´
  access_control:
    authentication: "oidc"  # oidc/saml/ldap
    authorization: "rbac"   # rbac/abac
    mfa_required: true
    
  # ğŸ“‹ ê°ì‚¬ ë¡œê¹…
  audit_logging:
    enabled: true
    events: ["data_access", "model_training", "prediction_requests"]
    retention: "10_years"
    
  # ğŸ›¡ï¸ ë„¤íŠ¸ì›Œí¬ ë³´ì•ˆ
  network_security:
    enable_vpc: true
    enable_private_endpoints: true
    enable_firewall: true

# ğŸ’¡ ì—”í„°í”„ë¼ì´ì¦ˆ ìš´ì˜ ê°€ì´ë“œ:
#
# ğŸš€ ì´ˆê¸° ì„¤ì •:
#   1. í´ë¼ìš°ë“œ í”„ë¡œì íŠ¸ ë° ê¶Œí•œ ì„¤ì •
#   2. í™˜ê²½ë³€ìˆ˜ ë˜ëŠ” ë¹„ë°€ ê´€ë¦¬ ì„œë¹„ìŠ¤ êµ¬ì„±
#   3. ë„¤íŠ¸ì›Œí¬ ë° ë³´ì•ˆ ì •ì±… ì ìš©
#   4. ëª¨ë‹ˆí„°ë§ ë° ì•Œë¦¼ ì„¤ì •
#
# ğŸ“Š ìš´ì˜ ëª¨ë‹ˆí„°ë§:
#   - ì„±ëŠ¥ ë©”íŠ¸ë¦­: ì‘ë‹µì‹œê°„, ì²˜ë¦¬ëŸ‰, ì—ëŸ¬ìœ¨
#   - ë¹„ìš© ëª¨ë‹ˆí„°ë§: í´ë¼ìš°ë“œ ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰
#   - ë³´ì•ˆ ëª¨ë‹ˆí„°ë§: ì ‘ê·¼ ë¡œê·¸, ì´ìƒ íƒì§€
#   - ë°ì´í„° í’ˆì§ˆ: ë°ì´í„° ë“œë¦¬í”„íŠ¸, ëª¨ë¸ ì„±ëŠ¥
#
# ğŸ”„ ë°°í¬ ì „ëµ:
#   - Blue-Green ë°°í¬
#   - Canary ë¦´ë¦¬ìŠ¤
#   - A/B í…ŒìŠ¤íŠ¸
#   - ë¡¤ë°± ê³„íš
#
# ğŸ”’ ë³´ì•ˆ ê²€í† :
#   - ì •ê¸°ì ì¸ ë³´ì•ˆ ê°ì‚¬
#   - ì ‘ê·¼ ê¶Œí•œ ê²€í† 
#   - ì•”í˜¸í™” í‚¤ ìˆœí™˜
#   - ì·¨ì•½ì  ìŠ¤ìº”
#
# =============================================================================