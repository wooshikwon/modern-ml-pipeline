# =============================================================================
# config/dev.yaml - ê°œë°œ í™˜ê²½ ì„¤ì • (base.yaml override)
# =============================================================================
# 
# ğŸ¯ DEV í™˜ê²½ ì² í•™: "ëª¨ë“  ê¸°ëŠ¥ì´ ì™„ì „íˆ ì‘ë™í•˜ëŠ” ì•ˆì „í•œ ì‹¤í—˜ì‹¤"
# - base.yaml ê¸°ë³¸ ì„¤ì •ì—ì„œ ê°œë°œíŒ€ í˜‘ì—…ì— í•„ìš”í•œ ì„¤ì •ë§Œ override
# - íŒ€ ê³µìœ : í†µí•©ëœ Feature Storeì™€ MLflow
# - ì•ˆì „í•œ ì‹¤í—˜: ìš´ì˜ì— ì˜í–¥ ì—†ëŠ” ë…ë¦½ í™˜ê²½
# - ì‹¤ì œ í™˜ê²½: PRODì™€ ë™ì¼í•œ ê¸°ìˆ  ìŠ¤íƒ ê²€ì¦
# =============================================================================

# í™˜ê²½ ì‹ë³„ì
environment:
  app_env: "dev"  # base.yaml override
  gcp_project_id: "dev-project"

# ë°ì´í„° ì–´ëŒ‘í„° - SQL ì–´ëŒ‘í„° ìš°ì„  (base.yaml override)
data_adapters:
  default_loader: "sql"              # base.yaml override: SQL ìš°ì„ 
  default_storage: "storage"         # base.yaml ìœ ì§€
  default_feature_store: "feature_store"  # base.yaml ìœ ì§€
  
  adapters:
    # SQL ì–´ëŒ‘í„° - PostgreSQL ê°œë°œ DB (base.yaml override)
    sql:
      class_name: SqlAdapter
      config:
        connection_uri: "postgresql://postgres:postgres@127.0.0.1:5432/mlflow"  # mmp-local-dev í˜¸í™˜
        
        # ğŸŒ Use Caseë³„ DB ì„¤ì • ì˜ˆì‹œ:
        #
        # ğŸ¢ íŒ€ ê³µìœ  PostgreSQL:
        # connection_uri: "postgresql://team:${TEAM_DB_PASSWORD}@dev-db.company.com:5432/ml_dev"
        # pool_size: 10
        # max_overflow: 5
        #
        # â˜ï¸ Cloud SQL (GCP) ê°œë°œ ì¸ìŠ¤í„´ìŠ¤:
        # connection_uri: "postgresql://dev_user:${DEV_DB_PASSWORD}@${CLOUD_SQL_DEV_IP}:5432/ml_dev"
        # ssl_mode: "require"

# Feature Store - ê°œë°œ í™˜ê²½ ì„¤ì • (base.yaml override)
feature_store:
  provider: "feast"
  feast_config:
    project: "ml_pipeline_dev"
    provider: "local"
    registry: "data/feature_store/dev_registry.sqlite"
    
    # Offline Store - PostgreSQL (mmp-local-dev)
    offline_store:
      type: "postgres"
      host: "localhost"
      port: 5432
      database: "mlflow"     # mmp-local-dev ê¸°ë³¸ DB
      db_schema: "public"    # mmp-local-dev ê¸°ë³¸ ìŠ¤í‚¤ë§ˆ  
      user: "postgres"       # mmp-local-dev ê¸°ë³¸ ì‚¬ìš©ì
      password: "postgres"   # mmp-local-dev ê¸°ë³¸ íŒ¨ìŠ¤ì›Œë“œ
    
    # Online Store - Redis (mmp-local-dev)
    online_store:
      type: "redis"
      connection_string: "localhost:6379"

# MLflow ì„¤ì • - ì™¸ë¶€ ì„œë²„ ì—°ê²° ì§€ì› (base.yaml override)
mlflow:
  tracking_uri: ${MLFLOW_TRACKING_URI:./mlruns}  # base.yaml override: í™˜ê²½ë³€ìˆ˜ ì§€ì›
  experiment_name: "E2E-Test-Experiment-2025"  # base.yaml override
  
  # ğŸŒ Use Caseë³„ MLflow ì„¤ì •:
  #
  # ğŸ¢ íŒ€ ê³µìœ  MLflow ì„œë²„:
  # tracking_uri: "https://mlflow-dev.company.com"
  # experiment_name: "Team-Dev-Experiments-${TEAM_NAME}"
  #
  # ğŸ“Š ê°œë°œìë³„ ì‹¤í—˜ ë¶„ë¦¬:
  # experiment_name: "Dev-${USER}-Experiments"
  # tags:
  #   developer: ${USER}
  #   environment: "dev"

# í•˜ì´í¼íŒŒë¼ë¯¸í„° íŠœë‹ - ê°œë°œ í™˜ê²½ ìµœì í™” (base.yaml override)
hyperparameter_tuning:
  enabled: true             # base.yaml override: ê°œë°œì—ì„œëŠ” í™œì„±í™”
  timeout: 600              # base.yaml override: 10ë¶„ (ê°œë°œ í™˜ê²½ ìì› ë³´í˜¸)
  
  pruning:
    n_startup_trials: 5     # base.yaml override: ë¹ ë¥¸ ê°œë°œ í”¼ë“œë°±
    n_warmup_steps: 10      # base.yaml override
  
  parallelization:
    n_jobs: 4               # base.yaml override: ê°œë°œ ì„œë²„ ìì› ê³ ë ¤

# API ì„œë¹™ - ê°œë°œ ë° í…ŒìŠ¤íŠ¸ìš© (base.yaml override)
serving:
  enabled: true
  model_stage: "Staging"    # base.yaml override: MLflow Staging ìŠ¤í…Œì´ì§€ ì‚¬ìš©
  
  # ğŸŒ Use Caseë³„ ì„œë¹™ ì„¤ì •:
  #
  # ğŸ‘¥ íŒ€ ê³µìœ  ê°œë°œ ì„œë²„:
  #   host: "0.0.0.0"
  #   port: 8080
  #   workers: 2
  #   cors_origins: ["http://localhost:3000", "https://dev-frontend.company.com"]

# ì•„í‹°íŒ©íŠ¸ ì €ì¥ì†Œ - ê°œë°œ í™˜ê²½ ë°ì´í„° ê´€ë¦¬ (base.yaml override)
artifact_stores:
  # í”¼ì²˜ ì¦ê°• ë°ì´í„° (base.yaml override)
  augmented_dataset:
    enabled: true
    base_uri: "file://./local/artifacts/dev_augmented"  # base.yaml override: dev ì „ìš© ê²½ë¡œ
    
  # ì „ì²˜ë¦¬ ë°ì´í„° - ê°œë°œì—ì„œëŠ” í™œì„±í™” (base.yaml override)
  preprocessed_dataset:
    enabled: true           # base.yaml override: ê°œë°œì—ì„œëŠ” í™œì„±í™”
    base_uri: "file://./local/artifacts/dev_preprocessed"  # base.yaml override: dev ì „ìš© ê²½ë¡œ
    
  # ì˜ˆì¸¡ ê²°ê³¼ (base.yaml override)
  prediction_results:
    enabled: true
    base_uri: "file://./local/artifacts/dev_predictions"  # base.yaml override: dev ì „ìš© ê²½ë¡œ
    
    # PostgreSQL ì €ì¥ - mmp-local-dev ì—°ë™ (base.yaml ì¶”ê°€)
    postgres_storage:
      enabled: true
      table_name: "batch_predictions"
      connection_uri: "postgresql://postgres:postgres@127.0.0.1:5432/mlflow"  # mmp-local-dev í˜¸í™˜

# ê°œë°œ ì§€ì› ê¸°ëŠ¥ (í™˜ê²½ë³„ ì¶”ê°€ ì„¤ì •)
development:
  enable_debug_mode: true     # ìƒì„¸ ë””ë²„ê¹… ì •ë³´
  enable_profiling: false     # ê¸°ë³¸ ë¹„í™œì„±í™” (í•„ìš”ì‹œ true)
  save_intermediate: true     # ì¤‘ê°„ ê²°ê³¼ ì €ì¥ (ë””ë²„ê¹…ìš©)

# ğŸ’¡ ê°œë°œíŒ€ ê°€ì´ë“œ:
#
# ğŸš€ ê°œë°œ í™˜ê²½ ì‹œì‘:
#   ./setup-dev-environment.sh start
#
# ğŸ§ª ëª¨ë¸ ì‹¤í—˜:
#   APP_ENV=dev uv run python main.py train --recipe-file my_experiment
#
# ğŸ”„ API ì„œë¹™ í…ŒìŠ¤íŠ¸:
#   APP_ENV=dev uv run python main.py serve-api --run-id <DEV_RUN_ID>
#
# ğŸ“Š MLflow UI ì ‘ê·¼:
#   http://localhost:5002
