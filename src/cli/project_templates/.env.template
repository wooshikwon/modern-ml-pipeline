# =============================================================================
# .env - Modern ML Pipeline 환경변수 설정
# =============================================================================
# 
# 🎯 이 파일은 modern-ml-pipeline init 명령어로 생성되었습니다.
# 필요한 환경변수의 값을 설정하고 사용하세요.
#
# ⚠️  중요: 이 파일은 .gitignore에 포함되어 있습니다 (안전함)
# 
# 📋 현재 템플릿: {{ template_name }}
# =============================================================================

# 🏠 실행 환경
APP_ENV={{ app_env }}

{% if template_name == 'local' %}
# =============================================================================
# 📊 MLflow 설정 (로컬 모드 - 기본 설정)
# =============================================================================

# 로컬 파일 모드 사용 (./mlruns 디렉토리)
# MLFLOW_TRACKING_URI=./mlruns

# 실험명 (선택사항)
# MLFLOW_EXPERIMENT_NAME=My-Local-Experiments

# =============================================================================
# 💡 로컬 모드 사용법:
# =============================================================================
# 
# 1. 데이터 준비: data/ 디렉토리에 CSV 또는 Parquet 파일 배치
# 2. 학습 실행: modern-ml-pipeline train --recipe-file recipes/local_classification_test.yaml  
# 3. 결과 확인: MLflow UI 자동 실행됨 (브라우저에서 접속 URL 확인)
#
# 외부 서버 연결이 필요한 경우 아래 섹션의 주석을 해제하세요.
#
# =============================================================================

{% elif template_name == 'dev' %}
# =============================================================================
# 📊 MLflow 설정 (개발 환경)
# =============================================================================

# mmp-local-dev 연동 (기본값)
MLFLOW_TRACKING_URI=http://localhost:5002

# 실험명
MLFLOW_EXPERIMENT_NAME=Dev-Team-Experiments

# =============================================================================
# 🐘 PostgreSQL 연결 (mmp-local-dev)
# =============================================================================

POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_DB=mlflow

# =============================================================================
# ⚡ Redis 연결 (mmp-local-dev)
# =============================================================================

REDIS_HOST=localhost
REDIS_PORT=6379

# =============================================================================
# 🍽️ Feast Feature Store 설정
# =============================================================================

FEAST_PROJECT=ml_pipeline_dev
FEAST_REGISTRY_PATH=../mmp-local-dev/feast/feature_repo/registry.db

{% elif template_name == 'enterprise' %}
# =============================================================================
# ☁️ 엔터프라이즈 클라우드 설정
# =============================================================================

# MLflow 클라우드 서버
MLFLOW_TRACKING_URI=https://your-mlflow-server.company.com

# 실험명 (팀/프로젝트별로 설정)
MLFLOW_EXPERIMENT_NAME=Enterprise-Production-Models

# =============================================================================
# 🏢 클라우드 인프라 연결 (아래 중 하나 선택)
# =============================================================================

# Google Cloud Platform (BigQuery + GCS)
GCP_PROJECT_ID=your-ml-project
GOOGLE_APPLICATION_CREDENTIALS=/path/to/service-account-key.json
BIGQUERY_DATASET=ml_pipeline_production
GCS_BUCKET=your-ml-artifacts-bucket

# Amazon Web Services (선택사항 - GCP 대신)
# AWS_ACCESS_KEY_ID=your-aws-access-key
# AWS_SECRET_ACCESS_KEY=your-aws-secret-key
# AWS_REGION=us-east-1
# S3_BUCKET=your-ml-data-bucket

# Microsoft Azure (선택사항 - GCP 대신)
# AZURE_STORAGE_ACCOUNT=your-storage-account
# AZURE_STORAGE_KEY=your-storage-key

# =============================================================================
# 🗄️ 엔터프라이즈 데이터베이스
# =============================================================================

# PostgreSQL (Cloud SQL, RDS, Azure Database 등)
POSTGRES_HOST=your-db-server.com
POSTGRES_PORT=5432
POSTGRES_USER=ml-service-account
POSTGRES_PASSWORD=your-secure-db-password
POSTGRES_DB=ml_production

# =============================================================================
# ⚡ Redis 클러스터 (고가용성)
# =============================================================================

REDIS_CONNECTION_STRING=redis://your-redis-cluster.com:6379
REDIS_PASSWORD=your-redis-password

{% elif template_name == 'research' %}
# =============================================================================
# 🧪 연구 환경 설정
# =============================================================================

# MLflow 연구 서버 (또는 로컬 모드)
MLFLOW_TRACKING_URI=http://localhost:5002
# MLFLOW_TRACKING_URI=https://research-mlflow.university.edu

# 연구 프로젝트별 실험명
MLFLOW_EXPERIMENT_NAME=Research-Project-{{ project_name | default('MyResearch') }}

# =============================================================================
# 🔬 연구용 외부 서비스 연동
# =============================================================================

# Weights & Biases (실험 추적)
# WANDB_API_KEY=your-wandb-api-key
# WANDB_PROJECT=your-research-project

# Hugging Face (모델 및 데이터셋)
# HUGGINGFACE_API_KEY=hf_your-token

# OpenAI API (LLM 실험용)
# OPENAI_API_KEY=sk-your-openai-api-key

# =============================================================================
# 📊 연구용 데이터베이스 (선택사항)
# =============================================================================

# 연구실 PostgreSQL 서버
# POSTGRES_HOST=research-db.university.edu
# POSTGRES_PORT=5432
# POSTGRES_USER=your-research-account
# POSTGRES_PASSWORD=your-research-password
# POSTGRES_DB=research_data

{% endif %}

# =============================================================================
# 🔧 고급 설정 (모든 템플릿 공통)
# =============================================================================

# 로그 레벨
LOG_LEVEL=INFO

# 하이퍼파라미터 튜닝 병렬 처리
# N_JOBS=4

# Optuna 최적화 데이터베이스 (선택사항)
# OPTUNA_DB_URL=sqlite:///optuna.db

{% if template_name == 'enterprise' %}
# =============================================================================
# 🔒 보안 설정 (엔터프라이즈 전용)
# =============================================================================

# API 보안
# API_SECRET_KEY=your-32-character-secret-key
# JWT_SECRET_KEY=your-jwt-secret-for-api-auth

# 모니터링
# SENTRY_DSN=https://your-sentry-dsn@sentry.io/project
# DATADOG_API_KEY=your-datadog-key

# 알림
# SLACK_WEBHOOK_URL=https://hooks.slack.com/services/your/webhook
# PAGERDUTY_API_KEY=your-pagerduty-key

{% endif %}

# =============================================================================
# 💡 다음 단계:
# =============================================================================
{% if template_name == 'local' %}
#
# 1. 데이터 준비: data/ 디렉토리에 학습용 데이터 파일 추가
# 2. 학습 시작: modern-ml-pipeline train --recipe-file recipes/local_classification_test.yaml
# 3. 결과 확인: MLflow UI가 자동으로 열림
#
{% elif template_name == 'dev' %}
#
# 1. mmp-local-dev 시작: ./setup-dev-environment.sh start
# 2. 연결 확인: modern-ml-pipeline self-check
# 3. 학습 시작: modern-ml-pipeline train --recipe-file recipes/dev_classification_test.yaml
#
{% elif template_name == 'enterprise' %}
#
# 1. 클라우드 인증 설정 완료
# 2. 연결 테스트: modern-ml-pipeline validate --config production --check-connections
# 3. 프로덕션 모델 학습: modern-ml-pipeline train --recipe-file recipes/production_model.yaml
#
{% elif template_name == 'research' %}
#
# 1. 연구 데이터 준비 또는 외부 API 키 설정
# 2. 실험 환경 확인: modern-ml-pipeline self-check
# 3. 연구 모델 학습: modern-ml-pipeline train --recipe-file recipes/research_experiment.yaml
#
{% endif %}
# =============================================================================